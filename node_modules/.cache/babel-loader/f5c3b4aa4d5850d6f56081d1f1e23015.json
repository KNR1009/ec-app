{"ast":null,"code":"import _slicedToArray from\"/Users/itoukazunari/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useCallback,useEffect}from'react';import{TextInput,PrimaryButton,SelectBox}from\"../componets/UIkit/index\";import{saveProduct}from\"../reducks/products/operations\";import{useDispatch}from'react-redux';import{ImageArea}from'../componets/Producuts/index';import{db}from'../firebase';import{SetSizesArea}from'../componets/Producuts/';var ProductEdit=function ProductEdit(){var dispatch=useDispatch();// 商品の編集\nvar id=window.location.pathname.split('/product/edit')[1];if(id!==\"\"){id=id.split('/')[1];}var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),gender=_useState10[0],setGender=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),price=_useState12[0],setPrice=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),images=_useState14[0],setImages=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),sizes=_useState16[0],setSizes=_useState16[1];// onchangeに引き渡すコールバック\nvar inputName=useCallback(function(event){setName(event.target.value);},[setName]);var inputDescription=useCallback(function(event){setDescription(event.target.value);},[setDescription]);var inputPrice=useCallback(function(event){setPrice(event.target.value);},[setPrice]);// カテゴリー用の連想配列\n// const categories = [\n//   {id: 'tops', name: \"トップス\"},\n//   {id: \"shirts\", name:'シャツ'},\n//   {id: 'pants', name: 'パンツ'}\n// ]\n// 性別の連想配列\nvar genders=[{id:\"all\",name:\"すべて\"},{id:\"male\",name:\"メンズ\"},{id:\"female\",name:\"レディース\"}];// idが一致する商品情報をrenderした際に取得\nuseEffect(function(){if(id!==\"\"){db.collection('products').doc(id).get().then(function(snapshot){var product=snapshot.data();setName(product.name);setDescription(product.description);setImages(product.images);setCategory(product.category);setGender(product.gender);setPrice(product.price);setSizes(product.sizes);});}},[]);// カテゴリー一覧をfirebaseより取得\nuseEffect(function(){db.collection('categories').orderBy('order','asc').get().then(function(snapshots){var list=[];snapshots.forEach(function(snapshot){var data=snapshot.data();list.push({id:data.id,name:data.name});});setCategories(list);});},[]);return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"u-text__headline u-text-center\",children:\"\\u5546\\u54C1\\u306E\\u767B\\u9332\\u30FB\\u7DE8\\u96C6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"c-section-container\",children:[/*#__PURE__*/_jsx(ImageArea,{images:images,setImages:setImages}),/*#__PURE__*/_jsx(TextInput,{fullWidth:true,label:\"商品名\",multiline:false,required:true,onChange:inputName,rows:1,value:name,type:\"text\"}),/*#__PURE__*/_jsx(TextInput,{fullWidth:true,label:\"商品説明\",multiline:true,required:true,onChange:inputDescription,rows:5,value:description,type:\"text\"}),/*#__PURE__*/_jsx(SelectBox,{label:\"カテゴリー\",options:categories,required:true,select:setCategory,value:category}),/*#__PURE__*/_jsx(SelectBox,{label:\"性別\",options:genders,required:true,select:setGender,value:gender}),/*#__PURE__*/_jsx(TextInput,{fullWidth:true,label:\"価格\",multiline:false,required:true,onChange:inputPrice,rows:1,value:price,type:\"number\"}),/*#__PURE__*/_jsx(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/_jsx(SetSizesArea,{sizes:sizes,setSizes:setSizes}),/*#__PURE__*/_jsx(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(PrimaryButton,{label:\"商品情報を保存\",onClick:function onClick(){return dispatch(saveProduct(id,name,description,category,gender,price,images,sizes));}})})]})]});};export default ProductEdit;","map":{"version":3,"sources":["/Users/itoukazunari/Desktop/ec-app/src/templates/ProductEdit.jsx"],"names":["React","useState","useCallback","useEffect","TextInput","PrimaryButton","SelectBox","saveProduct","useDispatch","ImageArea","db","SetSizesArea","ProductEdit","dispatch","id","window","location","pathname","split","name","setName","description","setDescription","category","setCategory","categories","setCategories","gender","setGender","price","setPrice","images","setImages","sizes","setSizes","inputName","event","target","value","inputDescription","inputPrice","genders","collection","doc","get","then","snapshot","product","data","orderBy","snapshots","list","forEach","push"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport { TextInput, PrimaryButton, SelectBox } from \"../componets/UIkit/index\";\nimport { saveProduct } from \"../reducks/products/operations\"\nimport { useDispatch } from 'react-redux';\nimport { ImageArea } from '../componets/Producuts/index'\nimport { db } from '../firebase';\nimport {SetSizesArea } from '../componets/Producuts/'\n\n\n  const ProductEdit = () => {\n\n  const dispatch = useDispatch();\n\n  // 商品の編集\n  let id = window.location.pathname.split('/product/edit')[1];\n  if(id !== \"\"){\n    id = id.split('/')[1]\n  }\n\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [gender, setGender] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [images, setImages] = useState([])\n  const [sizes, setSizes] = useState([])\n\n  // onchangeに引き渡すコールバック\n  const inputName = useCallback((event)=>{\n      setName(event.target.value)\n  }, [setName])\n\n  const inputDescription = useCallback((event)=>{\n    setDescription(event.target.value)\n  }, [setDescription])\n\n  const inputPrice = useCallback((event)=>{\n    setPrice(event.target.value)\n  }, [setPrice])\n\n\n  // カテゴリー用の連想配列\n  // const categories = [\n  //   {id: 'tops', name: \"トップス\"},\n  //   {id: \"shirts\", name:'シャツ'},\n  //   {id: 'pants', name: 'パンツ'}\n  // ]\n\n  // 性別の連想配列\n  const genders = [\n    { id: \"all\", name: \"すべて\" },\n    { id: \"male\", name: \"メンズ\" },\n    { id: \"female\", name: \"レディース\" },\n  ];\n\n    // idが一致する商品情報をrenderした際に取得\n  useEffect(()=>{\n    if(id !==  \"\"){\n      db.collection('products').doc(id).get().then(snapshot => {\n        const product = snapshot.data()\n        setName(product.name)\n        setDescription(product.description)\n        setImages(product.images)\n        setCategory(product.category)\n        setGender(product.gender)\n        setPrice(product.price)\n        setSizes(product.sizes)\n      })\n    }\n  }, [])\n\n  // カテゴリー一覧をfirebaseより取得\n  useEffect(()=>{\n    db.collection('categories')\n    .orderBy('order', 'asc')\n    .get()\n    .then((snapshots)=>{\n      const list = [];\n      snapshots.forEach(snapshot => {\n        const data = snapshot.data();\n        list.push({\n          id: data.id,\n          name: data.name\n        })\n      })\n      setCategories(list)\n    })\n  },[])\n\n\n  return (\n    <section>\n            <h2 className=\"u-text__headline u-text-center\">商品の登録・編集</h2>\n            <div className=\"c-section-container\">\n                <ImageArea images={images} setImages={setImages} />\n                <TextInput\n                    fullWidth={true} label={\"商品名\"} multiline={false} required={true}\n                    onChange={inputName} rows={1} value={name} type={\"text\"}\n                />\n                <TextInput\n                    fullWidth={true} label={\"商品説明\"} multiline={true} required={true}\n                    onChange={inputDescription} rows={5} value={description} type={\"text\"}\n                />\n                <SelectBox\n                    label={\"カテゴリー\"} options={categories} required={true} select={setCategory} value={category}\n                />\n                <SelectBox\n                    label={\"性別\"} options={genders} required={true} select={setGender} value={gender}\n                />\n                <TextInput\n                    fullWidth={true} label={\"価格\"} multiline={false} required={true}\n                    onChange={inputPrice} rows={1} value={price} type={\"number\"}\n                />\n\n                <div className=\"module-spacer--small\"/>\n                <SetSizesArea sizes={sizes} setSizes={setSizes} />\n                <div className=\"module-spacer--small\" />\n                <div className=\"center\">\n                    <PrimaryButton\n                        label={\"商品情報を保存\"}\n                        onClick={() => dispatch(saveProduct(id, name, description, category, gender, price, images, sizes ))}\n                    />\n                </div>\n            </div>\n        </section>\n  );\n}\nexport default ProductEdit;"]},"metadata":{},"sourceType":"module"}