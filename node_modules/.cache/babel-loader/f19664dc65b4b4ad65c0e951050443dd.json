{"ast":null,"code":"import _slicedToArray from\"/Users/itoukazunari/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/itoukazunari/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{makeStyles}from'@material-ui/styles';import React,{useCallback,useEffect,useState}from'react';import{db,FirebaseTimestamp}from'../firebase';import HTMLReactParser from'html-react-parser';import{ImageSwiper,SizeTable}from'../componets/Producuts';import{useDispatch}from'react-redux';import{addProductToCart}from'../reducks/users/operations';var useStyles=makeStyles(function(theme){var _sliderBox,_detail;return{sliderBox:(_sliderBox={},_defineProperty(_sliderBox,theme.breakpoints.down('sm'),{margin:'0 auto 24px auto',height:320,width:320}),_defineProperty(_sliderBox,theme.breakpoints.up('sm'),{margin:'0 auto',height:400,width:400}),_sliderBox),detail:(_detail={textAlign:'left'},_defineProperty(_detail,theme.breakpoints.down('sm'),{margin:'0 auto 16px auto',height:320,width:320}),_defineProperty(_detail,theme.breakpoints.up('sm'),{margin:'0 auto',height:'auto',width:400}),_detail),price:{fontSize:36}};});// 改行用のメソットを作成する\nvar returnCodeToBr=function returnCodeToBr(text){if(text==\"\"){return text;}else{return HTMLReactParser(text.replace(/\\r?\\n/g,'<br />'));}};var ProductDetail=function ProductDetail(){var classes=useStyles();var dispatch=useDispatch();var id=window.location.pathname.split('/product/')[1];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];useEffect(function(){db.collection('products').doc(id).get().then(function(doc){var data=doc.data();setProduct(data);});},[]);// カートに商品を追加する処理(stateの値から取得)\nvar addProduct=useCallback(function(selectedSize){var timestamp=FirebaseTimestamp.now();dispatch(addProductToCart({added_at:timestamp,description:product.description,gender:product.gender,images:product.images,name:product.name,price:product.price,productId:product.id,quantity:1,size:selectedSize}));},[product]);return/*#__PURE__*/_jsx(\"section\",{className:\"c-section-wrapin\",children:product&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-grid__row\",children:[/*#__PURE__*/_jsx(\"div\",{className:classes.sliderBox,children:/*#__PURE__*/_jsx(ImageSwiper,{images:product.images})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.detail,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"u-text__headline\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:classes.price,children:[\"\\xA5\",product.price.toLocaleString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/_jsx(SizeTable,{sizes:product.sizes,addProduct:addProduct}),/*#__PURE__*/_jsx(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/_jsx(\"p\",{children:returnCodeToBr(product.description)})]})]})});};export default ProductDetail;","map":{"version":3,"sources":["/Users/itoukazunari/Desktop/ec-app/src/templates/ProductDetail.jsx"],"names":["makeStyles","React","useCallback","useEffect","useState","db","FirebaseTimestamp","HTMLReactParser","ImageSwiper","SizeTable","useDispatch","addProductToCart","useStyles","theme","sliderBox","breakpoints","down","margin","height","width","up","detail","textAlign","price","fontSize","returnCodeToBr","text","replace","ProductDetail","classes","dispatch","id","window","location","pathname","split","product","setProduct","collection","doc","get","then","data","addProduct","selectedSize","timestamp","now","added_at","description","gender","images","name","productId","quantity","size","toLocaleString","sizes"],"mappings":"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","sourcesContent":["import { makeStyles } from '@material-ui/styles';\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { db, FirebaseTimestamp } from '../firebase';\nimport HTMLReactParser from 'html-react-parser'\nimport {ImageSwiper, SizeTable} from '../componets/Producuts'\nimport { useDispatch } from 'react-redux';\nimport { addProductToCart } from '../reducks/users/operations'\n\nconst useStyles = makeStyles((theme) => ({\n    sliderBox: {\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 24px auto',\n            height: 320,\n            width: 320\n        },\n        [theme.breakpoints.up('sm')]: {\n            margin: '0 auto',\n            height: 400,\n            width: 400\n        },\n    },\n    detail: {\n        textAlign: 'left',\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 16px auto',\n            height: 320,\n            width: 320\n        },\n        [theme.breakpoints.up('sm')]: {\n            margin: '0 auto',\n            height: 'auto',\n            width: 400\n        },\n    },\n    price: {\n        fontSize: 36\n    },\n}))\n\n// 改行用のメソットを作成する\nconst returnCodeToBr = (text) => {\n  if(text==\"\"){\n    return text\n  }else{\n    return HTMLReactParser(text.replace(/\\r?\\n/g, '<br />'))\n  }\n}\n\nconst ProductDetail = ()=>{\n\n    const classes = useStyles()\n    const dispatch = useDispatch()\n    let id = window.location.pathname.split('/product/')[1];\n    const [product, setProduct] = useState(null);\n\n    useEffect(() => {\n        db.collection('products').doc(id).get().then(doc => {\n            const data = doc.data()\n            setProduct(data)\n        })\n    },[])\n\n    // カートに商品を追加する処理(stateの値から取得)\n    const addProduct = useCallback((selectedSize) => {\n        const timestamp = FirebaseTimestamp.now()\n        dispatch(addProductToCart({\n            added_at: timestamp,\n            description: product.description,\n            gender: product.gender,\n            images: product.images,\n            name: product.name,\n            price: product.price,\n            productId: product.id,\n            quantity: 1,\n            size: selectedSize\n        }))\n    }, [product])\n\n\n    return(\n      <section className=\"c-section-wrapin\">\n            {product && (\n                <div className=\"p-grid__row\">\n                    <div className={classes.sliderBox}>\n                        <ImageSwiper \n                          images={product.images}\n                        />\n                    </div>\n                    <div className={classes.detail}>\n                        <h2 className=\"u-text__headline\">{product.name}</h2>\n                        <p className={classes.price}>¥{(product.price).toLocaleString()}</p>\n                        <div className=\"module-spacer--small\"/>\n                        <SizeTable sizes={product.sizes} addProduct={addProduct}/>\n                        <div className=\"module-spacer--small\"/>\n                        <p>{returnCodeToBr(product.description)}</p>\n                    </div>\n                </div>\n            )}\n        </section>\n    )\n}\n\nexport default ProductDetail;"]},"metadata":{},"sourceType":"module"}