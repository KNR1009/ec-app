{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/itoukazunari/Desktop/ec-app/src/componets/Producuts/ImageArea.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddPhotoAlternateIcon from \"@material-ui/icons/AddPhotoAlternate\";\nimport { storage } from '../../firebase/index';\nimport { ImagePreview } from \"./index\";\n\nconst ImageArea = props => {\n  _s();\n\n  const uploadImage = useCallback(event => {\n    const file = event.target.files;\n    let blob = new Blob(file, {\n      type: \"image/jpeg\"\n    }); // Generate random 16 digits strings\n\n    const S = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n    const N = 16;\n    const fileName = Array.from(crypto.getRandomValues(new Uint32Array(N))).map(n => S[n % S.length]).join('');\n    const uploadRef = storage.ref('images').child(fileName);\n    const uploadTask = uploadRef.put(blob);\n    uploadTask.then(() => {\n      // Handle successful uploads on complete\n      uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n        const newImage = {\n          id: fileName,\n          path: downloadURL\n        };\n        props.setImages(prevState => [...prevState, newImage]);\n      });\n    }).catch(() => {});\n  }, [props.setImages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid__list-images\",\n      children: props.images.length > 0 && props.images.map(image => {\n        /*#__PURE__*/\n        _jsxDEV(ImagePreview, {\n          path: image.path,\n          id: image.id\n        }, image.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"u-text-right\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u5546\\u54C1\\u753B\\u50CF\\u3092\\u767B\\u9332\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(AddPhotoAlternateIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"u-display-none\",\n            type: \"file\",\n            id: \"image\",\n            onChange: event => uploadImage(event)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ImageArea, \"2yN7bXdIc2wq1yZPO+7wjoFVCJo=\");\n\n_c = ImageArea;\nexport default ImageArea;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageArea\");","map":{"version":3,"sources":["/Users/itoukazunari/Desktop/ec-app/src/componets/Producuts/ImageArea.jsx"],"names":["React","useCallback","IconButton","AddPhotoAlternateIcon","storage","ImagePreview","ImageArea","props","uploadImage","event","file","target","files","blob","Blob","type","S","N","fileName","Array","from","crypto","getRandomValues","Uint32Array","map","n","length","join","uploadRef","ref","child","uploadTask","put","then","snapshot","getDownloadURL","downloadURL","newImage","id","path","setImages","prevState","catch","images","image"],"mappings":"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","sourcesContent":["import React, { useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddPhotoAlternateIcon from \"@material-ui/icons/AddPhotoAlternate\";\nimport {storage} from '../../firebase/index'\nimport {ImagePreview} from \"./index\";\n\nconst ImageArea = (props) => {\n\n  const uploadImage = useCallback((event) => {\n       \n        const file = event.target.files;\n        let blob = new Blob(file, { type: \"image/jpeg\" });\n\n        // Generate random 16 digits strings\n        const S=\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n        const N=16;\n        const fileName = Array.from(crypto.getRandomValues(new Uint32Array(N))).map((n)=>S[n%S.length]).join('')\n\n        const uploadRef = storage.ref('images').child(fileName);\n        const uploadTask = uploadRef.put(blob);\n\n        uploadTask.then(() => {\n            // Handle successful uploads on complete\n            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\n                const newImage = {id: fileName, path: downloadURL};\n                props.setImages((prevState => [...prevState, newImage]))\n                \n            });\n        }).catch(() => {\n            \n        });\n    }, [props.setImages])\n\n  return (\n    <div>\n      <div className=\"p-grid__list-images\">\n        {props.images.length > 0 && (\n          props.images.map(image => {\n              <ImagePreview path={image.path} key={image.id} id={image.id} />\n          })\n        )}\n      </div>\n      <div className=\"u-text-right\">\n      <span>商品画像を登録する</span>\n      <IconButton>\n        <label>\n          <AddPhotoAlternateIcon />\n          <input\n            className=\"u-display-none\"\n            type=\"file\"\n            id=\"image\"\n            onChange={(event) => uploadImage(event)}\n          />\n        </label>\n      </IconButton>\n    </div>\n    </div>\n  );\n}\nexport default ImageArea"]},"metadata":{},"sourceType":"module"}