{"ast":null,"code":"import { FirebaseTimestamp, db } from \"../../firebase\";\nimport { useDispatch } from \"react-redux\";\nconst productsRef = db.collection('products');\nexport const saveProduct = (name, description, category, gender, price) => {\n  return async dispatch => {\n    const timestamp = FirebaseTimestamp.now();\n    const data = {\n      category: category,\n      description: description,\n      gender: gender,\n      name: name,\n      price: parseInt(price, 10),\n      updated_at: timestamp\n    }; // 空doc()でidを自動で生成\n\n    const ref = productsRef.doc(); // 自動生成したidを変数に格納\n\n    const id = ref.id; // dataにidを追加\n\n    data.id = id; // 作成日を登録\n\n    data.created_at = timestamp; // firebaseへ値をset\n\n    return productsRef.doc(id).set(data).then(() => {\n      dispatch(push('/'));\n    }).catch(error => {\n      throw new Error(error);\n    });\n  };\n};","map":{"version":3,"sources":["/Users/itoukazunari/Desktop/ec-app/src/reducks/products/operations.js"],"names":["FirebaseTimestamp","db","useDispatch","productsRef","collection","saveProduct","name","description","category","gender","price","dispatch","timestamp","now","data","parseInt","updated_at","ref","doc","id","created_at","set","then","push","catch","error","Error"],"mappings":"AAAA,SAAQA,iBAAR,EAA2BC,EAA3B,QAAqC,gBAArC;AACA,SAASC,WAAT,QAA4B,aAA5B;AAGA,MAAMC,WAAW,GAAGF,EAAE,CAACG,UAAH,CAAc,UAAd,CAApB;AAEA,OAAO,MAAMC,WAAW,GAAG,CAACC,IAAD,EAAOC,WAAP,EAAoBC,QAApB,EAA8BC,MAA9B,EAAsCC,KAAtC,KAAgD;AACzE,SAAO,MAAOC,QAAP,IAAoB;AAGzB,UAAMC,SAAS,GAAGZ,iBAAiB,CAACa,GAAlB,EAAlB;AACA,UAAMC,IAAI,GAAG;AACXN,MAAAA,QAAQ,EAAEA,QADC;AAEXD,MAAAA,WAAW,EAAEA,WAFF;AAGXE,MAAAA,MAAM,EAAEA,MAHG;AAIXH,MAAAA,IAAI,EAACA,IAJM;AAKXI,MAAAA,KAAK,EAAEK,QAAQ,CAACL,KAAD,EAAQ,EAAR,CALJ;AAMXM,MAAAA,UAAU,EAACJ;AANA,KAAb,CAJyB,CAazB;;AACA,UAAMK,GAAG,GAAGd,WAAW,CAACe,GAAZ,EAAZ,CAdyB,CAezB;;AACA,UAAMC,EAAE,GAAGF,GAAG,CAACE,EAAf,CAhByB,CAiBzB;;AACAL,IAAAA,IAAI,CAACK,EAAL,GAAUA,EAAV,CAlByB,CAmBzB;;AACAL,IAAAA,IAAI,CAACM,UAAL,GAAkBR,SAAlB,CApByB,CAsBzB;;AACA,WAAOT,WAAW,CAACe,GAAZ,CAAgBC,EAAhB,EAAoBE,GAApB,CAAwBP,IAAxB,EACNQ,IADM,CACD,MAAI;AACRX,MAAAA,QAAQ,CAACY,IAAI,CAAC,GAAD,CAAL,CAAR;AACD,KAHM,EAGJC,KAHI,CAGGC,KAAD,IAAS;AAChB,YAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AACD,KALM,CAAP;AAQD,GA/BD;AAgCD,CAjCM","sourcesContent":["import {FirebaseTimestamp, db } from \"../../firebase\"\nimport { useDispatch } from \"react-redux\";\n\n\nconst productsRef = db.collection('products');\n\nexport const saveProduct = (name, description, category, gender, price) => {\n  return async (dispatch) => {\n\n\n    const timestamp = FirebaseTimestamp.now();\n    const data = {\n      category: category,\n      description: description,\n      gender: gender,\n      name:name,\n      price: parseInt(price, 10),\n      updated_at:timestamp\n    }\n\n    // 空doc()でidを自動で生成\n    const ref = productsRef.doc();\n    // 自動生成したidを変数に格納\n    const id = ref.id\n    // dataにidを追加\n    data.id = id\n    // 作成日を登録\n    data.created_at = timestamp\n\n    // firebaseへ値をset\n    return productsRef.doc(id).set(data)\n    .then(()=>{\n      dispatch(push('/'))\n    }).catch((error)=>{\n      throw new Error(error)\n    })\n\n\n  }\n}"]},"metadata":{},"sourceType":"module"}