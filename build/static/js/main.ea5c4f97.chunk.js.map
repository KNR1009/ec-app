{"version":3,"sources":["reducks/users/actions.js","reducks/store/initialState.js","reducks/users/reducers.js","reducks/products/actions.js","reducks/products/reducers.js","reducks/users/selectors.js","firebase/index.js","firebase/config.js","reducks/users/operations.js","componets/UIkit/TextInput.jsx","componets/UIkit/PrimaryButton.jsx","componets/UIkit/SelectBox.jsx","componets/UIkit/GreyButton.jsx","componets/UIkit/TextDetail.jsx","templates/SignUp.jsx","templates/SignIn.jsx","templates/Rest.jsx","reducks/products/operations.js","componets/Producuts/ImageArea.jsx","componets/Producuts/ImagePreview.jsx","componets/Producuts/SetSizesArea.jsx","assets/img/src/no_image.png","componets/Producuts/ProductCard.jsx","componets/Producuts/ImageSwiper.jsx","componets/Producuts/SizeTable.jsx","componets/Producuts/CartListItem .jsx","componets/Producuts/OrderHistoryItem.jsx","componets/Producuts/OrderProducts.jsx","templates/ProductEdit.jsx","reducks/products/selectors.js","templates/ProductList.jsx","templates/ProductDetail.jsx","templates/CartList.jsx","templates/OrderConfirm.jsx","templates/OrderHistory.jsx","templates/UserMyPage.jsx","reducks/payments/operations.js","reducks/store/store.js","componets/payment/PaymentEdit.jsx","templates/CheckoutWrapper.jsx","Auth.jsx","Router.jsx","assets/img/src/icons/logo.png","componets/header/Header.jsx","componets/header/HeaderMenu.jsx","componets/header/CloseableDrawer.jsx","App.jsx","reportWebVitals.js","assets/theme.js","index.js"],"names":["FETCH_ORDER_HISTORY","FETCH_PRODUCTS_IN_CART","fetchProductsInCartAction","products","type","payload","SIGN_IN","signInAction","userState","isSignedIn","role","uid","username","SIGN_OUT","UPDARE_USER_STATE","initialState","list","users","cart","orders","UserReducer","state","action","Actions","FETCH_PRODUCTS","DELETE_PRODUCTS","ProductsReducer","usersSelector","getIsSignedIn","createSelector","getProductsInCart","getOrderHistory","getUserId","getUsername","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","firestore","storage","FirebaseTimestamp","functions","Timestamp","signOut","dispatch","a","then","push","TextInput","props","TextField","fullWidth","label","margin","multiline","required","rows","value","onChange","useStyles","makeStyles","button","backgroundColor","color","fontSize","height","marginBottom","width","PrimaryButton","classes","Button","className","variant","onClick","theme","formControl","minWidth","SelectBox","FormControl","InputLabel","Select","e","select","target","options","map","MenuItem","id","name","marginButton","row","display","flexFlow","marginLeft","marginRight","fontWeight","TextDetail","SignUp","useDispatch","useState","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","setUsername","inputEmail","useCallback","inputPassword","inputConfirmPassword","inputUsername","alert","createUserWithEmailAndPassword","result","user","timestamp","now","userInitialData","customer_id","created_at","updated_at","collection","doc","set","signUp","Option","styled","div","SignIn","signInWithEmailAndPassword","get","snapshot","data","signIn","Rest","sendPasswordResetEmail","catch","restPassword","productsRef","ImageArea","images","deleteImage","window","confirm","newImages","filter","image","setImages","ref","child","delete","uploadImage","event","file","files","blob","Blob","S","fileName","Array","from","crypto","getRandomValues","Uint32Array","n","length","join","uploadTask","put","getDownloadURL","downloadURL","newImage","path","prevState","IconButton","ImagePreview","alt","src","iconCell","padding","checkIcon","float","SetSizesArea","index","setIndex","size","setSize","quantity","setQuantity","inputSize","inputQuantity","addSize","sizes","setSizes","newSizes","useEffect","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","TableBody","item","editSize","deleteIndex","deleteSize","root","breakpoints","down","up","content","textAlign","justifyContent","paddingBottom","media","paddingTop","cursor","opacity","pointer","price","palette","secondary","dark","productName","boxOrient","lineHeight","overflow","lineClamp","ProductCard","toLocaleString","NoImage","React","anchorEl","setAnchorEl","handleClose","Card","CardMedia","CardContent","Typography","currentTarget","Menu","keepMounted","open","Boolean","onClose","getState","nextProducts","product","ImageSwiper","pagination","el","clickable","dynamicBullets","navigation","nextEl","prevEl","loop","spaceBetween","params","SizeTable","icon","addProduct","objectFit","text","CartListItem","selector","useSelector","ListItem","ListItemAvatar","ListItemText","primary","removeProductFromCart","cartId","Divider","OrderHistoryItem","datetimeTostring","dt","getFullYear","getMonth","getDate","order","updated","toDate","shipping","shipping_date","total","amount","Object","keys","OrderProducts","gtToProductPage","List","key","btn","ProductEdit","location","pathname","split","setName","description","setDescription","category","setCategory","categories","setCategories","gender","setGender","setPrice","inputName","inputDescription","inputPrice","orderBy","snapshots","forEach","parseInt","merge","error","Error","saveProduct","getProducts","ProductList","query","router","search","test","where","productList","fetchProducts","sliderBox","detail","ProductDetail","setProduct","selectedSize","addedProduct","added_at","productId","cartRef","HTMLReactParser","replace","usestyles","maxWidth","CartList","productsInCart","goToOrder","backToTop","GreyButton","detailBox","orderBox","border","borderRadius","boxShadow","OrderConfirm","subtotal","useMemo","reduce","sum","shippingFee","tax","userRef","soldOutProducts","batch","updateSizes","update","errormessage","commit","orderRef","date","shippingDate","fromDate","Date","setDate","history","orderProduct","orderList","background","grey","OrderHistory","UserMyPage","headers","Headers","createCustomer","paymentMethodId","fetch","BASE_URL","method","body","JSON","stringify","paymentMethod","userId","response","json","customerResponse","parse","PaymentEdit","stripe","useStripe","elements","useElements","register","console","cardElement","getElement","CardElement","createPaymentMethod","card","customerData","registerCard","style","base","invalid","stripePromise","loadStripe","CheckoutWrapper","Auth","children","onAuthStateChanged","Router","exact","flexGrow","menuBar","toolBar","iconButtons","Header","sideBarOpen","setSideBarOpen","handleDrawerToggle","isOpen","AppBar","position","Toolbar","logo","HeaderMenu","unsubscribe","onSnapshot","docChanges","change","findIndex","Badge","badgeContent","createStyles","drawer","flexShrink","toolbar","mixins","drawerPaper","searchField","alignItems","CloseableDrawer","container","searchKeyword","setKeyword","inputSearchKeyword","selectMenu","func","filters","setFilters","menus","Drawer","anchor","paper","ModalProps","menu","ListItemIcon","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createMuiTheme","light","main","contrastText","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","History","store","reduxCreateStore","combineReducers","connectRouter","applyMiddleware","routerMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ea5c4f97.chunk.js","sourcesContent":["// 注文履歴を保存する¥\nexport const FETCH_ORDER_HISTORY = \"FETCH_ORDER_HISTORY\";\nexport const fetchOrderHistoryAction = (history) => {\n    return {\n        type: \"FETCH_ORDER_HISTORY\",\n        payload: history\n    }\n}\n\n\n\n// カートの変更をこちらに記載する\nexport const FETCH_PRODUCTS_IN_CART = \"FETCH_PRODUCTS_IN_CART\";\nexport const fetchProductsInCartAction = (products) => {\n    return {\n        type: \"FETCH_PRODUCTS_IN_CART\",\n        payload: products\n    }\n}\n\nexport const SIGN_IN = \"SIGN_IN\";\nexport const signInAction = (userState) => {\n  return {\n    type: \"SIGN_IN\",\n    payload: {\n      isSignedIn: true,\n      role: userState.role,\n      uid: userState.uid,\n      username: userState.username,\n    },\n  };\n};\n\n// ログアウトした時のアクション\nexport const SIGN_OUT = \"SIGN_OUT\";\nexport const signOutAction = () => {\n  return {\n    type: \"SIGN_OUT\",\n    payload: {\n      isSignedIn: false,\n      uid: \"\",\n      username: \"\",\n    },\n  };\n};\n\n// クレジットカード情報の変更\nexport const UPDARE_USER_STATE = \"UPDARE_USER_STATE\";\nexport const updateUserStateAction = (userState) => {\n  return {\n    type: \"UPDARE_USER_STATE\",\n    payload: userState\n  };\n};\n","// こちらにstateの初期状態を記述する\n\nconst initialState = {\n  products:{\n    list:[]\n  },\n  users: {\n    cart: [],\n    isSignedIn: false,\n    orders:[],\n    role: \"\",\n    uid: \"\",\n    username: \"\"\n  },\n};\n\nexport default initialState","import * as Actions from './actions'\nimport initialState from '../store/initialState'\n\nexport const UserReducer = (state=initialState.users, action) => {\n  switch(action.type){\n    case Actions.FETCH_ORDER_HISTORY:\n      return{\n        ...state,\n        orders: [...action.payload]\n      };\n    case Actions.SIGN_IN:\n      return{\n        ...state,\n        ...action.payload\n      };\n    case Actions.UPDARE_USER_STATE:\n      return{\n        ...state,\n        ...action.payload\n      };\n    case Actions.SIGN_OUT:\n      return {\n        ...action.payload\n      };\n    case Actions.FETCH_PRODUCTS_IN_CART:\n       return {\n        ...state,\n        cart: [...action.payload]\n      };\n    default:\n      return state\n  }\n}","export const FETCH_PRODUCTS = \"FETCH_PRODUCTS\";\nexport const fetchProductsAction = (products) => {\n  return{\n    type: \"FETCH_PRODUCTS\",\n    payload: products\n  }\n}\n\nexport const DELETE_PRODUCTS = \"DELETE_PRODUCTS\";\nexport const deleteProductsAction = (products) => {\n  return{\n    type: \"DELETE_PRODUCTS\",\n    payload: products\n  }\n}","import * as Actions from \"./actions\";\nimport initialState from \"../store/initialState\";\n\nexport const ProductsReducer = (state = initialState.products, action) => {\n      switch(action.type){\n        case Actions.FETCH_PRODUCTS:\n          return{\n            ...state,\n            list: [...action.payload]\n          };\n        case Actions.DELETE_PRODUCTS:\n          return {\n            ...state,\n            list:[...action.payload]\n          }\n        default:\n          return state\n      }\n};\n","import {createSelector} from \"reselect\";\n\nconst usersSelector = (state) => state.users;\n\nexport const getIsSignedIn = createSelector(\n  [usersSelector],\n  state => state.isSignedIn\n);\n\nexport const getProductsInCart = createSelector(\n  [usersSelector],\n  state => state.cart\n)\n\nexport const getOrderHistory = createSelector(\n  [usersSelector],\n  state => state.orders\n)\n\n\nexport const getUserId = createSelector(\n  [usersSelector],\n  state => state.uid\n);\n\n\nexport const getUsername = createSelector([usersSelector], (state) => state.username);","// エントリーポイント\nimport firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport 'firebase/storage'\nimport 'firebase/functions'\nimport {firebaseConfig} from \"./config\";\n\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const db = firebase.firestore();\nexport const storage = firebase.storage();\nexport const functions = firebase.functions();\n// サーバーから現在の時刻を取得する\nexport const FirebaseTimestamp = firebase.firestore.Timestamp;","export const firebaseConfig = {\n  apiKey: \"AIzaSyBVvFshyc_SOlhZfSILWfFrfdH_JkacveE\",\n  authDomain: \"ec-app-8ba0b.firebaseapp.com\",\n  databaseURL: \"https://ec-app-8ba0b.firebaseio.com\",\n  projectId: \"ec-app-8ba0b\",\n  storageBucket: \"ec-app-8ba0b.appspot.com\",\n  messagingSenderId: \"1035628322919\",\n  appId: \"1:1035628322919:web:a284bcb26c4b671cc3f4c2\",\n  measurementId: \"G-3EX2HY12MS\"\n};\n\n","import {signInAction, fetchProductsInCartAction, fetchOrderHistoryAction} from \"./actions\";\nimport {push} from 'connected-react-router';\nimport {auth, FirebaseTimestamp ,db} from '../../firebase/index'\nimport { useDispatch } from \"react-redux\";\n\n\n\n// カートに追加するオペレーションを作成する\nexport const addProductToCart = (addedProduct) => {\n    return async (dispatch, getState) => {\n        const uid = getState().users.uid;\n        const cartRef = db.collection('users').doc(uid).collection('cart').doc()\n        addedProduct['cartId'] = cartRef.id;\n        await cartRef.set(addedProduct);\n        dispatch(push('/'))\n    }\n}\n\nexport const fetchProductsInCart = (products) => {\n  return async(dispatch) => {\n    dispatch(fetchProductsInCartAction(products))\n  }\n}\n\n\n// 注文履歴を取得するオペレーション\nexport const fetchOrderHistory = () => {\n  return async(dispatch, getState) => {\n      // 現在のログインユーザーの取得\n      const uid = getState().users.uid;\n      const list = []\n      // firebaseへアクセスして注文履歴の取得\n      db.collection('users').doc(uid)\n      .collection('orders')\n      .orderBy('updated_at', 'desc')\n      .get()\n      .then((snapshots) => {\n        snapshots.forEach(snapshot => {\n          const data = snapshot.data()\n          list.push(data)\n        })\n        dispatch(fetchOrderHistoryAction(list))\n      })\n  }\n}\n\n// 認証リッスン\nexport const listenAuthState = () =>{\n\n  // redux-thunkを利用定型文\n  return async (dispatch) =>{\n    return auth.onAuthStateChanged(user =>{\n      // 認証されていた場合はstateを変更\n      if(user){   \n        const uid = user.uid;\n        db.collection(\"users\")\n          .doc(uid)\n          .get()\n          .then((snapshot) => {\n            const data = snapshot.data();\n\n            // 以下でアクションを呼び出しsiginの処理を行う\n            dispatch(\n              signInAction({\n                isSignedIn: true,\n                role: data.role,\n                uid: uid,\n                username: data.username,\n              })\n            );\n          });\n\n      }else{\n        dispatch(push('/signIn'))\n      }\n    })\n  }\n}\n\n// ログイン\nexport const signIn = (email, password) => {\n  const dispatch = useDispatch;\n  // コールバック関数を返り値として持つようにする\n  return async(dispatch) => {\n    // バリデーションを行う\n    if ( email === \"\" || password === \"\") {\n      alert(\"必須項目が未入力です\");\n      return false;\n    }\n    \n    auth.signInWithEmailAndPassword(email, password).then((result) => {\n      const user = result.user;\n\n      // ユーザが存在すれば処理にすすむ\n      if (user) {\n        const uid = user.uid;\n        db.collection(\"users\")\n          .doc(uid)\n          .get()\n          .then((snapshot) => {\n            const data = snapshot.data();\n\n            // 以下でアクションを呼び出しsiginの処理を行う\n            dispatch(\n              signInAction({\n                isSignedIn: true,\n                role: data.role,\n                uid: uid,\n                username: data.username,\n              })\n            );\n\n            dispatch(push(\"/\"));\n          });\n      }\n    });\n\n  }\n\n  // 上記の記述を先ほどのLoginコンポーネントのクリック時のイベントで発火するようにする\n}\n\n// ログアウト\n\nexport const signOut = () => {\n  return async (dispatch) => {\n    auth.signOut()\n    .then(()=>{\n      dispatch(push('/'))\n    })\n  }\n}\n\n// パスワードを再設定\nexport const restPassword = (email) => {\n  return async (dispatch) => {\n    // バリデーションを行う\n    if (email === \"\" ) {\n      alert(\"必須項目が未入力です\");\n      return false;\n    }else{\n      auth.sendPasswordResetEmail(email)\n      .then(()=>{\n        alert('入力されたメールにパスワードリセット用のメールを送りました')\n        dispatch(push('/signin'))\n      }).catch(()=>{\n          alert('パスワードリセットに失敗しました')\n      })\n    }\n  }\n}\n\n// 新規登録\nexport const signUp = (username, email, password, confirmPassword) => {\n  return async (dispatch) => {\n    // Validations\n    \n      // バリデーションを行う\n      if (username === \"\" || email === \"\" || password === \"\") {\n        alert(\"必須項目が未入力です\");\n        return false;\n      }\n\n      if (password !== confirmPassword) {\n        alert(\"パスワードが一致しません。もう一度お試しください\");\n        return false;\n      }\n    \n\n    return auth\n      .createUserWithEmailAndPassword(email, password)\n      .then((result) => {\n        const user = result.user;\n        if (user) {\n          const uid = user.uid;\n          const timestamp = FirebaseTimestamp.now();\n\n          const userInitialData = {\n            customer_id: \"\",\n            created_at: timestamp,\n            email: email,\n            role: \"customer\",\n            uid: uid,\n            updated_at: timestamp,\n            username: username,\n          };\n          db.collection(\"users\")\n            .doc(uid)\n            .set(userInitialData)\n            .then(() => {\n              dispatch(push(\"/\"));\n            });\n          \n          \n        }\n      })\n      \n  };\n};","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nconst  TextInput = (props) => {\n    return (\n      <TextField\n        fullWidth={props.fullWidth}\n        label={props.label}\n        margin=\"dense\"\n        multiline={props.multiline}\n        required={props.required}\n        rows={props.rows}\n        value={props.value}\n        type={props.type}\n        onChange={props.onChange}\n      />\n    );\n}\nexport default TextInput","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/styles\";\n\n// ボタンのスタイルを変更する\n\nconst useStyles = makeStyles({\n  button: {\n    backgroundColor: \"#4dd0e1\",\n    color: \"#000\",\n    fontSize: 16,\n    height: 48,\n    marginBottom: 16,\n    width: 256,\n  },\n});\n\nconst PrimaryButton = (props) => {\n  const classes = useStyles();\n\n  return (\n    <Button\n      className={classes.button}\n      variant=\"contained\"\n      onClick={() => props.onClick()}\n    >\n      {props.label}\n    </Button>\n  );\n};\n\nexport default PrimaryButton;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    marginBottom: 16,\n    minWidth: 120,\n    width: \"100%\",\n  },\n}));\n\nconst SelectBox = (props) => {\n  const classes = useStyles();\n\n  return (\n    <FormControl className={classes.formControl}>\n      <InputLabel>{props.label}</InputLabel>\n      <Select\n        value={props.value}\n        required={props.required}\n        onChange={(e) => props.select(e.target.value)}\n      >\n        {props.options.map((value) => {\n          return (\n            <MenuItem key={value.id} value={value.id}>\n              {value.name}\n            </MenuItem>\n          );\n        })}\n      </Select>\n    </FormControl>\n  );\n};\n\nexport default SelectBox;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/styles\";\n\n// ボタンのスタイルを変更する\n\nconst useStyles = makeStyles({\n  button: {\n    backgroundColor: \"#CCCCCC\",\n    color: \"#000\",\n    fontSize: 16,\n    height: 48,\n    marginButton: 16,\n    width: 256,\n  },\n});\n\nconst PrimaryButton = (props) => {\n  const classes = useStyles();\n\n  return (\n    <Button\n      className={classes.button}\n      variant=\"contained\"\n      onClick={() => props.onClick()}\n    >\n      {props.label}\n    </Button>\n  );\n};\n\nexport default PrimaryButton;\n","import React from 'react';\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n    row: {\n        display: 'flex',\n        flexFlow: 'row wrap',\n        marginBottom: 16\n    },\n    label: {\n        marginLeft: 0,\n        marginRight: 'auto'\n    },\n    value: {\n        fontWeight: 600,\n        marginLeft: 'auto',\n        marginRight: 0\n    }\n})\n\nconst TextDetail = (props) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.row}>\n            <div className={classes.label}>{props.label}</div>\n            <div className={classes.value}>{props.value}</div>\n        </div>\n    );\n};\n\nexport default TextDetail;","import React, {useState, useCallback} from 'react'\nimport {TextInput, PrimaryButton} from '../componets/UIkit/index'\nimport { signUp } from '../reducks/users/operations'\nimport { useDispatch } from \"react-redux\";\n\nconst SignUp = ()=>{\n\n   const dispatch = useDispatch();\n\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [confirmPassword, setConfirmPassword] = useState(\"\")\n  const [username, setUsername] = useState(\"\")\n\n  const inputEmail = useCallback((e) => {\n    setEmail(e.target.value)\n  }, [setEmail]);\n\n  const inputPassword = useCallback((e) => {\n    setPassword(e.target.value)\n  }, [setPassword]);\n\n  const inputConfirmPassword = useCallback((e) => {\n    setConfirmPassword(e.target.value)\n  }, [setConfirmPassword]);\n\n  const inputUsername = useCallback((e) => {\n    setUsername(e.target.value)\n  }, [setUsername]);\n\n  return (\n    <div className=\"c-section-container\">\n      <h2 className=\"u-text-center u-text__headline\">アカウント登録</h2>\n      <div className=\"module-spacer--medium\"></div>\n\n      <TextInput\n        fullWidth={true}\n        label={\"ユーザー名\"}\n        multiline={false}\n        required={true}\n        rows={1}\n        value={username}\n        type={\"text\"}\n        onChange={inputUsername}\n      />\n      <TextInput\n        fullWidth={true}\n        label={\"メールアドレス\"}\n        multiline={false}\n        required={true}\n        rows={1}\n        value={email}\n        type={\"email\"}\n        onChange={inputEmail}\n      />\n      <TextInput\n        fullWidth={true}\n        label={\"パスワード\"}\n        multiline={false}\n        required={true}\n        rows={1}\n        value={password}\n        type={\"password\"}\n        onChange={inputPassword}\n      />\n      <TextInput\n        fullWidth={true}\n        label={\"パスワード確認\"}\n        multiline={false}\n        required={true}\n        rows={1}\n        value={confirmPassword}\n        type={\"password\"}\n        onChange={inputConfirmPassword}\n      />\n\n      <div className=\"module-spacer--medium\"></div>\n      <div className=\"center\">\n        <PrimaryButton\n          label={\"アカウントを登録する\"}\n          onClick={() =>\n            dispatch(signUp(username, email, password, confirmPassword))\n          }\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default SignUp","import React, { useState, useCallback } from \"react\";\nimport { TextInput, PrimaryButton } from \"../componets/UIkit/index\";\nimport { signIn } from \"../reducks/users/operations\";\nimport { useDispatch } from \"react-redux\";\nimport { push } from \"connected-react-router\";\nimport styled from \"@emotion/styled\";\n\nconst SignIn = () => {\n  const dispatch = useDispatch();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const inputEmail = useCallback(\n    (e) => {\n      setEmail(e.target.value);\n    },\n    [setEmail]\n  );\n\n  const inputPassword = useCallback(\n    (e) => {\n      setPassword(e.target.value);\n    },\n    [setPassword]\n  );\n\n  return (\n    <div className=\"c-section-container\">\n      <h2 className=\"u-text-center u-text__headline\">ログイン</h2>\n      <div className=\"module-spacer--medium\"></div>\n\n      <TextInput\n        fullWidth={true}\n        label={\"メールアドレス\"}\n        multiline={false}\n        required={true}\n        rows={1}\n        value={email}\n        type={\"email\"}\n        onChange={inputEmail}\n      />\n      <TextInput\n        fullWidth={true}\n        label={\"パスワード\"}\n        multiline={false}\n        required={true}\n        rows={1}\n        value={password}\n        type={\"password\"}\n        onChange={inputPassword}\n      />\n\n      <div className=\"module-spacer--medium\"></div>\n      <div className=\"center\">\n        <PrimaryButton\n          label={\"ログイン\"}\n          onClick={() => dispatch(signIn(email, password))}\n        />\n        <div className=\"module-spacer--medium\"></div>\n        <Option>\n          <p className=\"noaccount\" onClick={() => dispatch(push(\"/signup\"))}>\n            アカウントを持っていない方はこちら\n          </p>\n          <p\n            className=\"passwordrest\"\n            onClick={() => dispatch(push(\"/signin/reset\"))}\n          >\n            パスワードを忘れた方はこちら\n          </p>\n        </Option>\n      </div>\n    </div>\n  );\n};\n\nconst Option = styled.div`\n  p {\n    cursor: pointer;\n  }\n`;\n\nexport default SignIn;\n","import React, { useState, useCallback } from \"react\";\nimport { TextInput, PrimaryButton } from \"../componets/UIkit/index\";\nimport { restPassword } from '../reducks/users/operations'\nimport { useDispatch } from \"react-redux\";\nimport { push } from \"connected-react-router\";\n\nconst Rest = () => {\n  const dispatch = useDispatch();\n\n  const [email, setEmail] = useState(\"\");\n\n\n  const inputEmail = useCallback(\n    (e) => {\n      setEmail(e.target.value);\n    },\n    [setEmail]\n  );\n\n  return (\n    <div className=\"c-section-container\">\n      <h2 className=\"u-text-center u-text__headline\">パスワードを再設定</h2>\n      <div className=\"module-spacer--medium\"></div>\n\n      <TextInput\n        fullWidth={true}\n        label={\"メールアドレス\"}\n        multiline={false}\n        required={true}\n        rows={1}\n        value={email}\n        type={\"email\"}\n        onChange={inputEmail}\n      />\n\n      <div className=\"module-spacer--medium\"></div>\n      <div className=\"center\">\n        <PrimaryButton\n          label={\"パスワードをリセット\"}\n          onClick={() => dispatch(restPassword(email))}\n        />\n        <p onClick={() => dispatch(push(\"/login\"))}>\n          ログイン画面に戻る\n        </p>\n        \n      </div>\n    </div>\n  );\n};\n\nexport default Rest;\n","import { db, FirebaseTimestamp } from \"../../firebase/index\";\nimport { push } from \"connected-react-router\";\nimport {fetchProductsAction, deleteProductsAction} from \"./actions\"\n\n\nconst productsRef = db.collection(\"products\");\n\n\n// 商品を削除するメソット\nexport const deleteProduct = (id)=>{\n  return async(dispatch, getState) => {\n      productsRef.doc(id).delete()\n      .then(()=>{\n          const prevState = getState().products.list;\n         const nextProducts = prevState.filter(product => product.id !== id)\n          dispatch(deleteProductsAction(nextProducts))\n      })\n  }\n}\n\n// firebaseから商品情報を取得\nexport const fetchProducts = (gender, category) => {\n  \n  return async(dispatch) => {\n\n      let query = productsRef.orderBy('updated_at', 'desc');\n        query = (gender !== \"\") ? query.where('gender', '==', gender) : query;\n        query = (category !== \"\") ? query.where('category', '==', category) : query;\n\n\n      query.get().then(snapshots => {\n          const productList = []\n          snapshots.forEach(snapshot => {\n            const product = snapshot.data();\n            productList.push(product);\n          })\n          dispatch(fetchProductsAction(productList))\n      })\n  }\n}\n\n// カート商品の注文の処理\nexport const orderProduct = (productsInCart, price) => {\n    return async(dispatch, getState) => {\n\n      const uid = getState().users.uid; // 現在のログインユーザーの取得\n      const userRef = db.collection('users').doc(uid) // 現在のログインユーザーのfirebase情報取得\n      const timestamp = FirebaseTimestamp.now() // 現在時刻の取得\n\n      let products = {}; // カートの商品を一旦格納する\n      let soldOutProducts = []; // 売り切れ商品\n\n      const batch = db.batch();\n\n      // カート内の商品1つ1つに対して処理を行う\n      for(const product of productsInCart){\n        const snapshot = await  productsRef.doc(product.productId).get(); // カート内の商品idの取得\n        const sizes = snapshot.data().sizes; // firebaseのproductコレクションからsize情報を取得\n\n        // sizeのオブジェクトの個数を減らす処理\n        const updateSizes = sizes.map(size => {\n          // カート商品と一致している場合\n          if(size.size === product.size){\n            //  カート内部に入れている間に商品が購入された時の処理\n             if (size.quantity === 0){\n                soldOutProducts.push(product.name);\n                return size\n             }\n            //  新しいサイズのオブジェクトを作成\n             return{\n               size: size.size,\n               quantity: size.quantity - 1\n             }\n          }else{\n            // 個数の変更はなくそのまま返す\n            return size\n          }\n        });\n        // 注文履歴を残す\n        products[product.productId] = {\n              id: product.productId,\n              images: product.images,\n              name: product.name,\n              price: product.price,\n              size: product.size\n          };\n\n        // バッチ処理を記述する\n         batch.update(\n          productsRef.doc(product.productId),\n            {sizes:updateSizes}\n        )\n\n        batch.delete(\n          userRef.collection('cart').doc(product.cartId)\n        )\n      }\n\n       //  在庫がない商品が存在した場合は処理を起こさない\n      //  for文の外で実装を行う\n        if(soldOutProducts.length > 0) {\n          const errormessage = (soldOutProducts.length > 1) ? \n            soldOutProducts.join('と') :\n            soldOutProducts[0];\n          alert('大変申し訳ございません' + errormessage + 'は在庫切れとなったため注文処理を中断しました')\n          return false\n        }else{\n            // 先ほどのbatch処理を全て行う\n          batch.commit()\n            .then(()=>{\n              // firebaseに注文履歴を残す\n                const orderRef = userRef.collection('orders').doc();\n                const date = timestamp.toDate();\n                // Calculate shipping date which is the date after 3 days\n                const shippingDate = FirebaseTimestamp.fromDate(new Date(date.setDate(date.getDate() + 3)));\n\n                const history = {\n                  amount: price,\n                  created_at: timestamp,\n                  id: orderRef.id,\n                  products: products,\n                  shipping_date: shippingDate,\n                  updated_at: timestamp\n                }\n\n                // 全てが完了したら上記を保存して、注文確認ページへpush\n                orderRef.set(history);\n                dispatch(push('/'))\n\n            }).catch(()=>{\n              alert('注文処理に失敗しました。通信環境もご確認の、もう一度お試しください')\n            })\n        }\n    }\n}\n\nexport const saveProduct = (\n  id,\n  name,\n  description,\n  category,\n  gender,\n  price,\n  images,\n  sizes\n) => {\n  return async (dispatch) => {\n    const timestamp = FirebaseTimestamp.now();\n\n      const data = {\n        category: category,\n        description: description,\n        gender: gender,\n        images: images,\n        name: name,\n        price: parseInt(price, 10),\n        updated_at: timestamp,\n        sizes:sizes\n      }\n\n      if (id === \"\") {\n            const ref = productsRef.doc()\n            data.created_at = timestamp;\n            id = ref.id;\n            data.id = id;\n        }\n\n     return productsRef.doc(id).set(data, {merge: true})\n            .then(() => {\n                dispatch(push('/'))\n            }).catch((error) => {\n                throw new Error(error)\n            })\n    \n  };\n};","import React, { useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddPhotoAlternateIcon from \"@material-ui/icons/AddPhotoAlternate\";\nimport {storage} from '../../firebase/index'\nimport {ImagePreview} from \"./index\";\n\nconst ImageArea = (props) => {\n\n  const images = props.images;\n\n  // 画像を削除するメソット\n\n\n    const deleteImage = useCallback( id => {\n        const ret = window.confirm('この画像を削除しますか？')\n        if (!ret) {\n            return false\n        } else {\n            const newImages = images.filter(image => image.id !== id)\n            props.setImages(newImages);\n            return storage.ref('images').child(id).delete()\n        }\n    }, [images])\n    \n\n  const uploadImage = useCallback((event) => {\n        const file = event.target.files;\n        let blob = new Blob(file, { type: \"image/jpeg\" });\n\n        // Generate random 16 digits strings\n        const S=\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n        const N=16;\n        const fileName = Array.from(crypto.getRandomValues(new Uint32Array(N))).map((n)=>S[n%S.length]).join('')\n\n        const uploadRef = storage.ref('images').child(fileName);\n        const uploadTask = uploadRef.put(blob);\n\n        uploadTask.then(() => {\n            // Handle successful uploads on complete\n            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\n                const newImage = {id: fileName, path: downloadURL};\n                props.setImages((prevState => [...prevState, newImage]))\n                \n            });\n        }).catch(() => {\n            \n        });\n    }, [props.setImages])\n\n  return (\n    <div>\n      <div className=\"p-grid__list-images\">\n          {images.length > 0 && (\n              images.map(image => <ImagePreview id={image.id} path={image.path} key={image.id} delete={deleteImage}/> )\n          )}\n      </div>\n      <div className=\"u-text-right\">\n      <span>商品画像を登録する</span>\n      <IconButton>\n        <label>\n          <AddPhotoAlternateIcon />\n          <input\n            className=\"u-display-none\"\n            type=\"file\"\n            id=\"image\"\n            onChange={(event) => uploadImage(event)}\n          />\n        </label>\n      </IconButton>\n    </div>\n    </div>\n  );\n}\nexport default ImageArea","import React from 'react';\n\nconst ImagePreview = (props) => {\n\n    return (\n        <div className=\"p-media__thumb\" >\n            <img alt=\"アイキャッチ画像\" src={props.path} \n            onClick={()=> props.delete(props.id) }/>\n        </div>\n    );\n};\n\nexport default ImagePreview;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport {TextInput} from \"../UIkit\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {makeStyles} from \"@material-ui/styles\";\n\n\nconst useStyles = makeStyles({\n  iconCell:{\n    height:48,\n    width:48,\n    padding:0\n  },\n  checkIcon: {\n      float: 'right'\n  },\n})\n\nconst SetSizesArea = (props) => {\n  const classes = useStyles();\n\n  const [index, setIndex] = useState(0);\n  const [size, setSize] = useState(\"\");\n  const [quantity, setQuantity] = useState(0);\n\n  const inputSize = useCallback((event) => {\n    setSize(event.target.value)\n  }, [setSize])\n\n  const inputQuantity = useCallback((event) => {\n    setQuantity(event.target.value)\n  }, [setQuantity])\n\n  // サイズと数量のstateを変更するメソット\n  const addSize = useCallback((index, size, quantity)=>{\n      if(size === \"\" || quantity === \"\"){\n        return false;\n      }else{\n        // 新規追加の場合\n        if(index === props.sizes.length){\n          props.setSizes(prevState => [...prevState, {size: size, quantity: quantity}])\n          setIndex(index + 1);\n          setSize(\"\");\n          setQuantity(0);\n        }else{\n          // indexと配列数が一致していない場合なので編集の時\n          const newSizes = props.sizes;\n          newSizes[index] = {size:size, quantity:quantity}\n          props.setSizes(newSizes)\n          // 初期値に値を戻す\n          setIndex(newSizes.length);\n          setSize(\"\");\n          setQuantity(0);\n        }\n      \n      }\n  })  \n\n  // サイズと数量を編集\n  const editSize = (index, size, quantity) => {\n        setIndex(index);\n        setSize(size);\n        setQuantity(quantity);\n  }\n\n  // 削除する際の実装\n  const deleteSize = (deleteIndex) => {\n        const newSizes = props.sizes.filter((item, index) => index !== deleteIndex)\n        props.setSizes(newSizes);\n    }\n\n  // 編集が行われた場合にindexを修正する\n  const memoIndex = useEffect(()=>{\n    setIndex(props.sizes.length);\n  }, [props.sizes.length])\n\n  return(\n    <div>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>サイズ</TableCell>\n              <TableCell>数量</TableCell>\n              <TableCell className={classes.iconCell}></TableCell>\n              <TableCell className={classes.iconCell}></TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {props.sizes.length > 0 && (\n              props.sizes.map((item, index) => (\n                  <TableRow key={item.size}>\n                  <TableCell>{item.size}</TableCell>\n                  <TableCell>{item.quantity}</TableCell>\n                  <TableCell className={classes.iconCell}>\n                    <IconButton className={classes.iconCell} onClick={()=>editSize(index, item.size, item.quantity)}>\n                    <EditIcon />\n                    </IconButton>\n                  </TableCell>\n                  <TableCell className={classes.iconCell}>\n                    <IconButton className={classes.iconCell} onClick={()=> deleteSize(index)}>\n                    <DeleteIcon />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n        <div>\n        <TextInput\n          fullWidth={false}\n          label={\"サイズ\"}\n          multiline={false}\n          required={true}\n          rows={1}\n          value={size}\n          type={\"text\"}\n          onChange={inputSize}\n        />\n        <TextInput\n          fullWidth={false}\n          label={\"数量\"}\n          multiline={false}\n          required={true}\n          rows={1}\n          value={quantity}\n          type={\"number\"}\n          onChange={inputQuantity}\n        />\n        </div>\n        <IconButton className={classes.checkIcon} onClick={() => addSize(index, size, quantity)}>\n          <CheckCircleIcon/>\n        </IconButton>\n      </TableContainer >\n    </div>\n\n  )\n}\n\nexport default SetSizesArea","export default __webpack_public_path__ + \"static/media/no_image.1a2d0029.png\";","import React , { useState } from 'react'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport NoImage from '../../assets/img/src/no_image.png'\nimport {useDispatch} from 'react-redux';\nimport {push} from 'connected-react-router'\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport {deleteProduct} from '../../reducks/products/operations'\n\n\n// スタイルと整える\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        [theme.breakpoints.down('sm')]: {\n            margin: 8,\n            width: 'calc(50% - 16px)'\n        },\n        [theme.breakpoints.up('md')]: {\n            margin: 16,\n            width: 'calc(33.3333% - 32px)'\n        }\n    },\n    content: {\n        display: 'flex',\n        padding: '16 8',\n        textAlign: 'left',\n        justifyContent: 'space-between',\n        '&:last-child': {\n            paddingBottom: 16\n        }    \n    },\n    // icon: {\n    //     marginRight: 0,\n    //     marginLeft: 'auto'\n    // },\n    media: {\n        height:0,\n        paddingTop: '100%',\n        // width:'100%',\n        cursor:'pointer',\n        // overflow: 'hidden',\n        '&:hover': {\n        opacity: 0.6,\n        // transition:'1s all',\n        // // transform:'scale(1.1)'  \n        \n    }  \n        \n    },\n    pointer:{\n      cursor:'pointer',\n    },\n    price: {\n        color: theme.palette.secondary.dark,\n        fontSize: 16\n    },\n    productName: {\n        boxOrient: 'vertical',\n        display: '-webkit-box',\n        fontSize: 14,\n        lineHeight: '18px',\n        overflow: 'hidden',\n        [theme.breakpoints.down('sm')]: {\n            height: 36,\n            lineClamp: 2,\n        },\n        [theme.breakpoints.up('md')]: {\n            height: 18,\n            lineClamp: 1,\n        }\n    }\n}));\n\n\nconst ProductCard = (props) => {\n  const price = props.price.toLocaleString();\n  const dispatch = useDispatch();\n\n  // 画像の取得\n  const images = (props.images.length > 0) ? props.images : [NoImage]\n  const classes = useStyles();\n\n\n  // メニューの開閉状態\n   const [anchorEl, setAnchorEl] = React.useState(null);\n   const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n   const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n\n\n  return(\n    <Card className={classes.root}>\n      <CardMedia\n        className={classes.media}\n        image={images[0].path}\n        onClick={()=>dispatch(push('/product/' + props.id))}\n      />\n      <CardContent className={classes.content}>\n         <div onClick={()=>dispatch(push('/product/' + props.id))} className={classes.pointer}>\n           <Typography color=\"textSecondary\" component=\"p\">\n           {props.name}\n         </Typography>  \n         <Typography component=\"p\" className={classes.price}>\n           ¥{price}\n         </Typography>  \n         </div>\n         <IconButton onClick={handleClick}>\n             <MoreVertIcon />\n         </IconButton>\n         <Menu\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n         >\n           <MenuItem onClick={()=>{dispatch(push(\"/product/edit/\" + props.id)) \n          handleClose()\n          }}>\n             編集する\n           </MenuItem>\n           <MenuItem \n           onClick={()=>{\n             dispatch(deleteProduct(props.id))\n             handleClose()\n           }}> \n             削除する\n           </MenuItem>\n        </Menu>\n      </CardContent >\n    </Card>\n  )\n}\n\nexport default ProductCard;","import React from 'react';\nimport Swiper from 'react-id-swiper';\nimport NoImage from '../../assets/img/src/no_image.png'\nimport 'swiper/css/swiper.css'\n\nconst ImageSwiper = (props) => {\n    const [params] = React.useState({\n        pagination: {\n            el: '.swiper-pagination',\n            type: 'bullets',\n            clickable: true,\n            dynamicBullets: true\n        },\n        navigation: {\n            nextEl: '.swiper-button-next',\n            prevEl: '.swiper-button-prev'\n        },\n        loop: true,\n        spaceBetween: 30\n    })\n\n    const images = props.images\n\n    return (\n        <Swiper {...params}>\n            {images.length === 0 ? (\n                <div className=\"p-media__thumb\">\n                    <img src={NoImage} alt=\"No Image\"/>\n                </div>\n            ) : (\n                images.map(image => (\n                    <div className=\"p-media__thumb\" key={image.id}>\n                        <img src={image.path} alt=\"商品画像\"/>\n                    </div>\n                ))\n            )}\n        </Swiper>\n    );\n};\n\nexport default ImageSwiper;","import React from 'react';\nimport Table from \"@material-ui/core/Table\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport {makeStyles} from \"@material-ui/styles\";\n\nconst useStyles = makeStyles({\n  iconCell: {\n    height: 48,\n    width: 48,\n  },\n  \n})\n\n\n\nconst SizeTable = (props) => {\n  const sizes = props.sizes;\n  const classes = useStyles();\n\n  return(\n    <TableContainer>\n     <Table>\n      <TableBody>\n        {sizes.length > 0 && (\n          sizes.map(size => (\n            <TableRow key={size.size}>\n              <TableCell>{size.size}</TableCell>\n              <TableCell>残り{size.quantity}点</TableCell>\n              <TableCell className={classes.icon}>\n                  {size.quantity > 0 ? (\n                  <IconButton>\n                    <ShoppingCartIcon onClick={()=>props.addProduct(size.size)}/>\n                  </IconButton>\n                  ): (\n                      <div>売り切れ</div>\n                  )}\n              </TableCell>\n              <TableCell className={classes.icon}>\n                <IconButton>\n                  <FavoriteBorderIcon />\n                </IconButton>\n              </TableCell>\n            </TableRow>\n          ))\n        )}\n      </TableBody>\n     </Table>\n  </TableContainer  >\n  )\n}\n\nexport default SizeTable;","import React from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport {makeStyles} from \"@material-ui/styles\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport {useSelector} from \"react-redux\";\nimport {getUserId} from \"../../reducks/users/selectors\";\nimport {db} from \"../../firebase/index\"\n\nconst useStyles = makeStyles((theme)=>({\n    list:{\n      height: 128,\n    },\n    image: {\n      objectFit: 'cover',\n      margin: 16,\n      height: 96,\n      width: 96\n    },\n    text:{\n      width: '100%'\n    }\n}))\n\nconst CartListItem  = (props) => {\n  const classes = useStyles()\n  const selector = useSelector((state) => state)\n\n  // 金額に対してカンマを付与する\n  const price = props.product.price.toLocaleString();\n\n  // 削除ボタンを押した時の変更処理を記述\n  const removeProductFromCart = (id) => {\n      const uid = getUserId(selector)\n      return db.collection('users').doc(uid).collection('cart').doc(id).delete();\n  }\n\n  return(\n    <>\n      <ListItem className={classes.list}>\n        <ListItemAvatar>\n          <img src={props.product.images[0].path} alt=\"\" className={classes.image}/>\n        </ListItemAvatar>\n        <div className={classes.text}>\n           <ListItemText primary={props.product.name} secondary={'サイズ : '+ props.product.size}/>\n           <ListItemText primary={'¥' + price} />\n        </div>\n        <IconButton onClick={()=>{ removeProductFromCart(props.product.cartId)}}>\n          <DeleteIcon />\n        </IconButton>\n      </ListItem>\n       <Divider />\n    </>\n  )\n}\n\nexport default CartListItem ","import React, {useEffect} from 'react'\nimport Divider from \"@material-ui/core/Divider\";\n// import {OrderedProducts} from \"./index\";\n// import {datetimeToString, dateToString} from \"../../function/common\";\nimport {TextDetail} from \"../UIkit\";\nimport {OrderProducts} from '../Producuts/index'\n\nconst OrderHistoryItem = (props) => {\n\n  // 注文した日時を取得して変換する関数\nconst datetimeTostring = (dt) => {\n    return dt.getFullYear() + '年'\n        + ((dt.getMonth()+1)) + '月'\n        + (dt.getDate()) + '日'\n        \n};\n  \n  const order = props.order;\n  const updated = datetimeTostring(order.updated_at.toDate())\n  const shipping = datetimeTostring(order.shipping_date.toDate())\n  const total = '¥' + order.amount.toLocaleString()\n  const products = props.order.products\n\n\n\n\n  return(\n    <div>\n      <div className=\"module-spacer--small\" />\n        <TextDetail label={'注文ID'} value={order.id}></TextDetail>\n        <TextDetail label={'注文日時'} value={updated}></TextDetail>\n        <TextDetail label={'発送日'} value={shipping}></TextDetail>\n        <TextDetail label={'注文合計'} value={total}></TextDetail>\n         {Object.keys(products).length > 0 && (\n            <OrderProducts products={products}/>\n            )}\n        <div className=\"module-spacer--extra-extra-small\" />\n        <Divider />\n    </div>\n  )\n}\n\nexport default OrderHistoryItem;","import React, {useCallback, useEffect} from 'react';\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {makeStyles} from \"@material-ui/styles\";\nimport {PrimaryButton} from \"../UIkit\";\nimport {useDispatch} from \"react-redux\";\nimport {push} from \"connected-react-router\"\n\nconst useStyles = makeStyles((theme) =>({\n  image: {\n        objectFit: 'cover',\n        margin: '8px 16px 8px 0',\n        height: 96,\n        width: 96\n    },\n  list:{\n      backgroundColor: '#fff',\n      height: 'auto'\n  },\n  text:{\n      width: '100%',\n  }\n}))\n\nconst OrderProducts = (props) => {\n  const products = props.products;\n  const classes = useStyles()\n  const dispatch = useDispatch()\n  \n  // 商品詳細ページに遷移させるメソットの作成\n  const gtToProductPage = useCallback((id)=>{\n        dispatch(push('/product/' + id))\n  },[])\n\n \n   return (\n        <List>\n            {Object.keys(products).map(key => {\n                const product = products[key]\n\n\n                return (\n                    <>\n                        <ListItem className={classes.list} key={product.id}>\n                            <ListItemAvatar>\n                                <img className={classes.image} src={product.images[0].path} alt=\"商品のTOP画像\" />\n                            </ListItemAvatar>\n                            <div className={classes.text}>\n                                <ListItemText primary={product.name} secondary={\"サイズ：\" + product.size} />\n                                <ListItemText primary={\"¥\"+product.price.toLocaleString()} />\n                            </div>\n                           <div>\n                              <PrimaryButton label={\"商品詳細を見る\"} onClick={()=>{gtToProductPage(product.id)}}  \n                              className={classes.btn}\n                              />\n                           </div>\n                        </ListItem>\n                        <Divider />\n                    </>\n                )\n            })}\n        </List>\n    );\n}\n\nexport default OrderProducts","import React, { useState, useCallback, useEffect } from 'react'\nimport { TextInput, PrimaryButton, SelectBox } from \"../componets/UIkit/index\";\nimport { saveProduct } from \"../reducks/products/operations\"\nimport { useDispatch } from 'react-redux';\nimport { ImageArea } from '../componets/Producuts/index'\nimport { db } from '../firebase';\nimport {SetSizesArea } from '../componets/Producuts/'\n\n\n  const ProductEdit = () => {\n\n  const dispatch = useDispatch();\n\n  // 商品の編集\n  let id = window.location.pathname.split('/product/edit')[1];\n  if(id !== \"\"){\n    id = id.split('/')[1]\n  }\n\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [gender, setGender] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [images, setImages] = useState([])\n  const [sizes, setSizes] = useState([])\n\n  // onchangeに引き渡すコールバック\n  const inputName = useCallback((event)=>{\n      setName(event.target.value)\n  }, [setName])\n\n  const inputDescription = useCallback((event)=>{\n    setDescription(event.target.value)\n  }, [setDescription])\n\n  const inputPrice = useCallback((event)=>{\n    setPrice(event.target.value)\n  }, [setPrice])\n\n\n  // カテゴリー用の連想配列\n  // const categories = [\n  //   {id: 'tops', name: \"トップス\"},\n  //   {id: \"shirts\", name:'シャツ'},\n  //   {id: 'pants', name: 'パンツ'}\n  // ]\n\n  // 性別の連想配列\n  const genders = [\n    { id: \"all\", name: \"すべて\" },\n    { id: \"male\", name: \"メンズ\" },\n    { id: \"female\", name: \"レディース\" },\n  ];\n\n    // idが一致する商品情報をrenderした際に取得\n  useEffect(()=>{\n    if(id !==  \"\"){\n      db.collection('products').doc(id).get().then(snapshot => {\n        const product = snapshot.data()\n        setName(product.name)\n        setDescription(product.description)\n        setImages(product.images)\n        setCategory(product.category)\n        setGender(product.gender)\n        setPrice(product.price)\n        setSizes(product.sizes)\n      })\n    }\n  }, [])\n\n  // カテゴリー一覧をfirebaseより取得\n  useEffect(()=>{\n    db.collection('categories')\n    .orderBy('order', 'asc')\n    .get()\n    .then((snapshots)=>{\n      const list = [];\n      snapshots.forEach(snapshot => {\n        const data = snapshot.data();\n        list.push({\n          id: data.id,\n          name: data.name\n        })\n      })\n      setCategories(list)\n    })\n  },[])\n\n\n  return (\n    <section>\n            <h2 className=\"u-text__headline u-text-center\">商品の登録・編集</h2>\n            <div className=\"c-section-container\">\n                <ImageArea images={images} setImages={setImages} />\n                <TextInput\n                    fullWidth={true} label={\"商品名\"} multiline={false} required={true}\n                    onChange={inputName} rows={1} value={name} type={\"text\"}\n                />\n                <TextInput\n                    fullWidth={true} label={\"商品説明\"} multiline={true} required={true}\n                    onChange={inputDescription} rows={5} value={description} type={\"text\"}\n                />\n                <SelectBox\n                    label={\"カテゴリー\"} options={categories} required={true} select={setCategory} value={category}\n                />\n                <SelectBox\n                    label={\"性別\"} options={genders} required={true} select={setGender} value={gender}\n                />\n                <TextInput\n                    fullWidth={true} label={\"価格\"} multiline={false} required={true}\n                    onChange={inputPrice} rows={1} value={price} type={\"number\"}\n                />\n\n                <div className=\"module-spacer--small\"/>\n                <SetSizesArea sizes={sizes} setSizes={setSizes} />\n                <div className=\"module-spacer--small\" />\n                <div className=\"center\">\n                    <PrimaryButton\n                        label={\"商品情報を保存\"}\n                        onClick={() => dispatch(saveProduct(id, name, description, category, gender, price, images, sizes ))}\n                    />\n                </div>\n            </div>\n        </section>\n  );\n}\nexport default ProductEdit;","import { createSelector } from \"reselect\";\n\nconst productsSelector = (state) => state.products;\n\nexport const getProducts = createSelector(\n    [productsSelector],\n    state => state.list\n);","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {ProductCard} from '../componets/Producuts'\nimport {fetchProducts} from '../reducks/products/operations'\nimport { ProductsReducer } from '../reducks/products/reducers';\nimport {getProducts} from '../reducks/products/selectors'\n\n\nconst ProductList = () => {\n  const dispatch = useDispatch();\n  const selector = useSelector((state) => state);\n  const products = getProducts(selector)\n\n  // クエリパラメタを取得する\n  const query = selector.router.location.search;\n  const gender = /^\\?gender=/.test(query) ? query.split('?gender=')[1] : \"\"\n  const category = /^\\?category=/.test(query) ? query.split(\"?category=\")[1]: \"\"\n\n  useEffect(()=>{\n      dispatch(fetchProducts(gender, category));\n  }, [query])\n\n\n  return(\n    <div className=\"c-section-wrapin\">\n      <div className=\"p-grid__row\">\n        {products.length > 0 && (\n          products.map(product => (\n            <ProductCard key={product.id} id={product.id} name={product.name} images={product.images} price={product.price}/>\n          )\n        ))\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default ProductList","import { makeStyles } from '@material-ui/styles';\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { db, FirebaseTimestamp } from '../firebase';\nimport HTMLReactParser from 'html-react-parser'\nimport {ImageSwiper, SizeTable} from '../componets/Producuts'\nimport { useDispatch } from 'react-redux';\nimport { addProductToCart } from '../reducks/users/operations'\n\nconst useStyles = makeStyles((theme) => ({\n    sliderBox: {\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 24px auto',\n            height: 320,\n            width: 320\n        },\n        [theme.breakpoints.up('sm')]: {\n            margin: '0 auto',\n            height: 400,\n            width: 400\n        },\n    },\n    detail: {\n        textAlign: 'left',\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 16px auto',\n            height: 320,\n            width: 320\n        },\n        [theme.breakpoints.up('sm')]: {\n            margin: '0 auto',\n            height: 'auto',\n            width: 400\n        },\n    },\n    price: {\n        fontSize: 36\n    },\n}))\n\n// 改行用のメソットを作成する\nconst returnCodeToBr = (text) => {\n  if(text==\"\"){\n    return text\n  }else{\n    return HTMLReactParser(text.replace(/\\r?\\n/g, '<br />'))\n  }\n}\n\nconst ProductDetail = ()=>{\n\n    const classes = useStyles()\n    const dispatch = useDispatch()\n    let id = window.location.pathname.split('/product/')[1];\n    const [product, setProduct] = useState(null);\n\n    useEffect(() => {\n        db.collection('products').doc(id).get().then(doc => {\n            const data = doc.data()\n            setProduct(data)\n        })\n    },[])\n\n    // カートに商品を追加する処理(stateの値から取得)\n    const addProduct = useCallback((selectedSize) => {\n        const timestamp = FirebaseTimestamp.now()\n        dispatch(addProductToCart({\n            added_at: timestamp,\n            description: product.description,\n            gender: product.gender,\n            images: product.images,\n            name: product.name,\n            price: product.price,\n            productId: product.id,\n            quantity: 1,\n            size: selectedSize\n        }))\n    }, [product])\n\n\n    return(\n      <section className=\"c-section-wrapin\">\n            {product && (\n                <div className=\"p-grid__row\">\n                    <div className={classes.sliderBox}>\n                        <ImageSwiper \n                          images={product.images}\n                        />\n                    </div>\n                    <div className={classes.detail}>\n                        <h2 className=\"u-text__headline\">{product.name}</h2>\n                        <p className={classes.price}>¥{(product.price).toLocaleString()}</p>\n                        <div className=\"module-spacer--small\"/>\n                        <SizeTable sizes={product.sizes} addProduct={addProduct}/>\n                        <div className=\"module-spacer--small\"/>\n                        <p>{returnCodeToBr(product.description)}</p>\n                    </div>\n                </div>\n            )}\n        </section>\n    )\n}\n\nexport default ProductDetail;","import React, {useCallback} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport List from \"@material-ui/core/List\";\nimport {getProductsInCart} from \"../reducks/users/selectors\";\nimport { CartListItem } from '../componets/Producuts/index'\nimport { PrimaryButton, GreyButton } from '../componets/UIkit/index'\nimport {push} from 'connected-react-router'\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst usestyles = makeStyles(()=>({\n    root:{\n      margin: '0 auto',\n      maxWidth: 512,\n      width: '100%'\n\n    }\n}))\n\nconst CartList = () => {\n  const selector = useSelector((state) => state);\n  const productsInCart= getProductsInCart(selector)\n  const dispatch = useDispatch()\n  const classes = usestyles()\n\n  const goToOrder = useCallback(()=>{\n      dispatch(push('/order/confirm'))\n  }, [])\n\n  const backToTop = useCallback(()=>{\n      dispatch(push('/'))\n  })\n\n\n  return(\n    <section className=\"c-section-wrapin\">\n      <h2 className=\"u-text__headLine\">ショッピングカート\n      </h2>\n      <List className={classes.root}>\n          {productsInCart.length > 0 && (\n              productsInCart.map(product => <CartListItem product={product} key={product.cartId} />)\n          )}\n      </List>\n      <div className=\"module-spacer--medium\" />\n            <div className=\"p-grid__column\">\n                <PrimaryButton label={\"レジへ進む\"}   onClick={()=>goToOrder()}/>\n                <div className=\"module-spacer--extra-extra-small\"/>\n                <GreyButton label={\"ショッピングを続ける\"}  onClick={()=>backToTop()}/>\n      </div>\n    </section>\n  );\n}\n\nexport default CartList","import React, {useCallback, useMemo} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport List from \"@material-ui/core/List\";\nimport {getProductsInCart} from \"../reducks/users/selectors\";\nimport { CartListItem } from '../componets/Producuts/index'\nimport { PrimaryButton, GreyButton } from '../componets/UIkit/index'\nimport {push} from 'connected-react-router'\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { TextDetail } from '../componets/UIkit/index'\nimport Divider from '@material-ui/core/Divider';\nimport { orderProduct } from '../reducks/products/operations'\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  detailBox: {\n    margin: '0 atuo',\n    [theme.breakpoints.down('sm')]:{\n      width: 320\n    },\n    [theme.breakpoints.up('md')]:{\n      width: 512\n    }\n  },\n  orderBox:{\n    border: '1px solid rgba(0,0,0,0.2)',\n    borderRadius: '4px',\n    boxShadow: '0 4px 2px 2px rgba(0,0,0,0.2)',\n    height: 256,\n    margin: '24px auto 16px auto',\n    padding: 16,\n    width: 288\n\n\n  }\n}))\n\nconst OrderConfirm = () => {\n\n  // スタイルの定義\n  const classes = useStyles()\n  const dispatch = useDispatch()\n\n  // storeのstateの商品情報の取得\n  const selector = useSelector((state)=> state);\n  const productsInCart = getProductsInCart(selector);\n\n  // 合計金額の計算\n  const subtotal = useMemo(() => {\n      return productsInCart.reduce((sum, product) => sum += product.price, 0)\n  }, [productsInCart])\n\n  // 送料の設定(1万円以上は無料)\n  const shippingFee = (subtotal >= 10000) ? 0 : 210;\n\n  // 税金\n  const tax = (subtotal) * 0.1\n  const total = subtotal + shippingFee + tax\n\n\n  // 注文ボタンがクリックされた際に呼び出される\n  const order = useCallback(()=>{\n    dispatch(orderProduct(productsInCart, total))\n  }, [productsInCart, total])\n\n  return(\n    <section className=\"c-section-wrapin\">\n      <h2 className=\"u-text__headline\">注文の確認</h2>\n      <div className=\"p-grid__row\">\n        <div className={classes.detailBox}>\n          <List> \n            {productsInCart.length > 0 && (\n                productsInCart.map(product => \n                  <CartListItem product={product} key={product.cartId}/>\n                  )\n            )\n            }\n          </List>\n        </div>\n        <div className={classes.orderBox}>\n          <TextDetail label={'商品合計'} value={'¥' + subtotal.toLocaleString() + '円'}/>\n          <TextDetail label={'消費税' + '円'} value={'¥' + tax+ '円'}/>\n          <TextDetail label={'送料'} value={'¥' + shippingFee + '円'}/>\n          < Divider />\n          <TextDetail label={'合計(税込み)'} value={'¥' + total.toLocaleString()+ '円'}/>\n          <PrimaryButton label={\"注文を確定\"}   onClick={()=>order()}/>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default OrderConfirm;","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport List from \"@material-ui/core/List\";\nimport {makeStyles} from \"@material-ui/styles\";\nimport { getOrderHistory } from '../reducks/users/selectors'\nimport { fetchOrderHistory } from '../reducks/users/operations'\nimport { OrderHistoryItem } from '../componets/Producuts'\n\nconst useStyles = makeStyles((theme) => ({\n    orderList: {\n        background: theme.palette.grey[\"100\"],\n        margin: '0 auto',\n        padding: 32,\n        [theme.breakpoints.down('sm')]: {\n            width: '100%'\n        },\n        [theme.breakpoints.up('md')]: {\n            width: 768\n        }\n    },\n}))\n\nconst OrderHistory = () => {\n    const classes = useStyles()\n    const selector = useSelector((state) => state);\n    const orders = getOrderHistory(selector)\n    const dispatch = useDispatch()\n  \n\n    // 注文履歴取得のメソット\n    useEffect(()=>{\n        dispatch(fetchOrderHistory())\n    }, [])\n\n    return(\n    <section className=\"c-section-wrapin\">\n            <List className={classes.orderList}>\n                {orders.length > 0 && (\n                    orders.map(order => <OrderHistoryItem order={order} key={order.id} />)\n                )}\n            </List>\n    </section>\n    )\n}\n\nexport default OrderHistory;","import React, {useCallback} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {PrimaryButton, TextDetail, GreyButton} from \"../componets/UIkit/index\";\nimport {getUsername} from \"../reducks/users/selectors\";\nimport {push} from \"connected-react-router\";\n\nconst UserMyPage = () => {\n  const dispatch = useDispatch();\n  const selector = useSelector((state)=>state);\n  const username = getUsername(selector);\n  return(\n    <section className=\"c-section-container\">\n      <h2 className=\"u-text__headline u-text-center\">マイページ</h2>\n      <div className=\"module-spacer--medium\"></div>\n      <TextDetail label={\"ユーザー名\"} value={username}/>\n      <div className=\"module-spacer--small\" />\n       <div className=\"u-text-center\">\n          <PrimaryButton label={\"カード情報の編集\"} onClick={()=>{dispatch(push('/user/payment/edit'))}}/> \n          <div className=\"module-spacer--small\" />\n          <GreyButton label={\"注文履歴の確認\"} onClick={()=>{dispatch(push('/order/history'))}}/> \n       </div>\n    </section>\n  )\n}\n\nexport default UserMyPage \n  ","import {CardElement} from '@stripe/react-stripe-js';\nimport { db, FirebaseTimestamp } from \"../../firebase/index\";\nimport { push } from \"connected-react-router\";\nimport { useDispatch } from 'react-redux';\nimport { updateUserStateAction } from '../users/actions'\n\n\n// Set Header\nconst headers = new Headers();\nheaders.set('Content-type', 'application/json');\nconst BASE_URL = \"https://ec-app-8ba0b.web.app\"\n\n// 新規登録を行うAPI\nconst createCustomer = async (email, paymentMethodId, uid) => {\n    const response = await fetch(BASE_URL + '/v1/customer', {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify({\n            email: email,\n            paymentMethod: paymentMethodId,\n            userId: uid,\n        })\n    });\n\n    const customerResponse = await response.json();\n    return JSON.parse(customerResponse.body);\n}\n\n\nexport const registerCard = (stripe, elements) => {\n  return async (dispatch, getState)=> {\n    const user = getState().users;\n    const email = user.email;\n    const uid = user.uid;\n\n    if (!stripe || !elements) {\n      // Stripe.js has not loaded yet. Make sure to disable\n      // form submission until Stripe.js has loaded.\n      console.error(\"Does not exist stripe or elements\");\n      return;\n    }\n\n    // Get a reference to a mounted CardElement. Elements knows how\n    // to find your CardElement because there can only ever be one of\n    // each type of element.\n    const cardElement = elements.getElement(CardElement);\n\n    // Use your card Element with other Stripe.js APIs\n    const {error, paymentMethod} = await stripe.createPaymentMethod({\n      type: 'card',\n      card: cardElement,\n    });\n\n    if (error) {\n      alert('error')\n      return;\n    } \n\n    const paymentMethodId = paymentMethod?.id;\n    const customerData = await createCustomer(email, paymentMethodId, uid)\n\n    // 処理がうまくいっているのかの確認を行う\n    if(customerData.id === \"\"){\n      alert('カード情報の登録に失敗しました')\n      return;\n    }else{\n       const updateUserState = {\n          customer_id: customerData.id,\n          payment_method_id: paymentMethodId\n      }\n\n    // db.collection('users').doc(uid)\n    //   .update(updateUserState)\n    //   .then(()=>{\n    //     dispatch(updateUserStateAction(updateUserState))\n    //     dispatch(push('/user/mypage'))\n    //   }).catch((error)=>{\n    //     // 顧客は登録されているが、stripe側には登録されている\n    //     alert('firebaseでの登録に失敗しました')\n    //   })\n    }\n    \n  }\n}","import {\n  createStore as reduxCreateStore, //store構築のモジュール\n  combineReducers, // 複数のReducerを結合するモジュール\n  applyMiddleware // routerで利用するミドルウェアa-ー\n} from 'redux';\n\n// ルーターをインポート\nimport {connectRouter, routerMiddleware} from \"connected-react-router\";\n\n// 非同期処理を制御するモジュール\nimport thunk from 'redux-thunk';\n\n// reducersをインポート(作成済み)\nimport {UserReducer} from '../users/reducers';\nimport {ProductsReducer} from '../products/reducers'\n\n\n// storeを作成\nexport default function createStore(history){\n  return reduxCreateStore( // storeの作成を行う\n    combineReducers({\n      router: connectRouter(history),\n      users: UserReducer,\n      products:ProductsReducer\n    }),\n    applyMiddleware(\n      routerMiddleware(history),\n      thunk\n    )\n  )\n}\n","import React, { useCallback } from 'react'\nimport {CardElement, useStripe, useElements} from '@stripe/react-stripe-js';\nimport {PrimaryButton, TextDetail, GreyButton} from \"../UIkit/index\";\nimport { useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router'\nimport { registerCard } from '../../reducks/payments/operations'\n\n\nconst PaymentEdit = () => {\n  const dispatch = useDispatch();\n  const stripe = useStripe();\n  const elements = useElements();\n\n  // カード情報を登録するメソット\n  const register = useCallback(() => {\n      dispatch(registerCard(stripe, elements))\n  }, [stripe, elements])\n  \n  return(\n    <section className=\"c-section-container\">\n      <h2 className=\"u-text__headline u-text-center\">\n        クレジットカード情報の登録・編集\n      </h2>\n      <div className=\"module-spacer--medium\"></div>\n      <CardElement\n            options={{\n              style: {\n                base: {\n                  fontSize: '16px',\n                  color: '#424770',\n                  '::placeholder': {\n                    color: '#aab7c4',\n                  },\n                },\n                invalid: {\n                  color: '#9e2146',\n                },\n              },\n            }}\n    />\n    <div className=\"module-spacer--medium\"></div>\n    <div className=\"u-text-center\">\n       <PrimaryButton label={\"カード情報を登録\"} \n       onClick={()=>register()}/>\n       <div className=\"module-spacer--small\" />\n       <GreyButton label={\"マイページに戻る\"} \n       onClick={()=>{dispatch(push('/user/mypage'))}}/>\n    </div>\n    </section>\n  )\n}\n\nexport default PaymentEdit","import React from 'react';\nimport {loadStripe} from \"@stripe/stripe-js/pure\";\nimport {Elements} from \"@stripe/react-stripe-js\";\nimport {PaymentEdit} from \"../componets/payment\";\n\nconst STRIPE_PUBLIC_KEY = \"pk_test_51Hvvt2HWpPeQiyZ0kRRcQvJCQXRLOCxlchdXJOzjEPqphASy3oMFEuVgVm3haFGTgll8vGybU6Gpu7CfIJ7h3sDT00zkWLDql9\" ;\n\nconst stripePromise = loadStripe(STRIPE_PUBLIC_KEY);\n\nconst CheckoutWrapper = () => {\n    return (\n        <Elements stripe={stripePromise}>\n            <PaymentEdit />\n        </Elements>\n    );\n};\nexport default CheckoutWrapper;","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { getIsSignedIn } from './reducks/users/selectors'\nimport { useEffect } from 'react';\nimport { listenAuthState } from './reducks/users/operations';\n\n\nexport const Auth = ({children}) => {\n\n  const dispatch = useDispatch()\n  // storeの状態を取得\n  const selector = useSelector((state) => state);\n  // store内部のログイン状態の確認\n  const isSignedIn = getIsSignedIn(selector)\n\n  useEffect(()=>{\n      if(!isSignedIn){\n        dispatch(listenAuthState())\n      }\n  }, [])\n\n  if(!isSignedIn){\n    return <></>\n  }else {\n    return children\n  }\n}\n\n","import React from 'react'\nimport { Route, Switch } from \"react-router\";\nimport { Login, Home, SignUp, SignIn, Rest, ProductEdit, ProductList, ProductDetail, CartList, OrderConfirm, OrderHistory, UserMyPage, CheckoutWrapper } from \"./templates\";\nimport { Auth } from './Auth'\n\nconst Router = () => {\n\n  return (\n    <Switch>\n      <Route exact path=\"/signup\" component={SignUp} />\n      <Route exact path=\"/signin\" component={SignIn} />\n      <Route exact path=\"/signin/reset\" component={Rest} />\n\n      <Auth>\n        <Route exact path=\"(/)?\" component={ProductList} />\n        <Route path=\"/product/edit(/:id)?\" component={ProductEdit} />\n        <Route exact path=\"/product/:id\" component={ProductDetail} />\n        <Route exact path=\"/cart\" component={CartList} />\n        <Route exact path=\"/order/confirm\" component={OrderConfirm} />\n        <Route exact path=\"/order/history\" component={OrderHistory} />\n        <Route exact path=\"/user/mypage\" component={UserMyPage} />\n        <Route exact path=\"/user/payment/edit\" component={CheckoutWrapper} />\n      </Auth>\n    </Switch>\n  );\n};\n\nexport default Router","export default __webpack_public_path__ + \"static/media/logo.dc529f81.png\";","import React, {useCallback, useState} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport logo from '../../assets/img/src/icons/logo.png'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getIsSignedIn } from '../../reducks/users/selectors';\nimport {push} from 'connected-react-router'\nimport {HeaderMenu ,CloseableDrawer} from './index'\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuBar: {\n      backgroundColor: \"#fff\",\n      color: '#444',\n  },\n  toolBar: {\n    margin: '0 auto',\n    maxWidth: 1024,\n    width: '100%'\n  },\n  iconButtons: {\n      margin: '0 0 0 auto'\n  },\n  pointer: {\n    cursor: 'pointer'\n  }\n}));\n\n\n\nconst Header = () => {\n  const classes = useStyles()\n  const selector = useSelector((state) => state)\n  const isSignedIn = getIsSignedIn(selector)\n  const dispatch = useDispatch();\n\n  // 開閉メニューのpropsを作成\n\n const [sideBarOpen, setSideBarOpen] = useState(false);\n\n    const handleDrawerToggle = useCallback((event, isOpen) => {\n        if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n            return;\n        }\n        setSideBarOpen(isOpen)\n    }, [setSideBarOpen]);\n\n\n  return(\n     <div className={classes.root}>\n            <AppBar position=\"fixed\" className={classes.menuBar}>\n                <Toolbar className={classes.toolBar}>\n                    <img alt=\"Logo\" src={logo} width=\"128px\" role=\"button\" className={classes.pointer} onClick={() => dispatch(push('/'))}/>\n                    {isSignedIn && (\n                        <div className={classes.iconButtons}>\n                            <HeaderMenu handleDrawerToggle ={handleDrawerToggle}/>\n                        </div>\n                    )}\n                </Toolbar>\n            </AppBar>\n            <CloseableDrawer \n              open={sideBarOpen}\n              onClose={handleDrawerToggle}\n            />\n           \n        </div>\n  )\n}\n\nexport default Header","import React, {useEffect} from 'react';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport {Badge} from \"@material-ui/core\";\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport { getProductsInCart,  getUserId } from '../../reducks/users/selectors'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { db }  from '../../firebase/index'\nimport {fetchProductsInCart} from '../../reducks/users/operations'\nimport {push} from 'connected-react-router'\n\n  const HeaderMenu = (props) => {\n  const dispatch = useDispatch()\n  const selector = useSelector((state) => state);\n  const userId = getUserId(selector);\n  let productsInCart = getProductsInCart(selector);\n\n// Listen products in user's cart\n    useEffect(() => {\n        const unsubscribe = db.collection('users').doc(userId).collection('cart')\n            .onSnapshot(snapshots => {\n\n                snapshots.docChanges().forEach(change => {\n                    const product = change.doc.data();\n                    const changeType = change.type\n\n                    switch (changeType) {\n                        case 'added':\n                            productsInCart.push(product);\n                            break;\n                        case 'modified':\n                            const index = productsInCart.findIndex(product => product.cartId === change.doc.id)\n                            productsInCart[index] = product;\n                            break;\n                        case 'removed':\n                            productsInCart = productsInCart.filter(product => product.cartId !== change.doc.id);\n                            break;\n                        default:\n                            break;\n                    }\n                });\n\n                dispatch(fetchProductsInCart(productsInCart))\n            });\n\n        return () => unsubscribe()\n    },[]);\n\n  return(\n      <>\n        <IconButton  onClick={()=>dispatch(push('/cart'))}>\n          <Badge badgeContent={productsInCart.length} color=\"secondary\">\n          < ShoppingCartIcon />\n          </Badge>\n        </IconButton>\n        <IconButton  >\n          <FavoriteBorderIcon />\n        </IconButton>\n        <IconButton   onClick={(e) => props.handleDrawerToggle(e, true)}>\n          <MenuIcon />\n        </IconButton>\n      </>\n  )\n}\n\nexport default HeaderMenu","import React, { useCallback, useEffect, useState } from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {makeStyles, createStyles } from '@material-ui/core/styles';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport HistoryIcon from '@material-ui/icons/History';\nimport PersonIcon from '@material-ui/icons/Person';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport {TextInput} from \"../UIkit\";\nimport { useDispatch } from 'react-redux';\nimport {push} from 'connected-react-router'\nimport {signOut} from '../../reducks/users/operations'\nimport { db } from '../../firebase';\n\nconst useStyles = makeStyles((theme) =>\n    createStyles({\n        drawer: {\n            [theme.breakpoints.up('sm')]: {\n                width: 256, // drawerのアイコン\n                flexShrink: 0,\n            }\n        },\n        // necessary for content to be below app bar\n        toolbar: theme.mixins.toolbar,\n        drawerPaper: {\n            width: 256,\n        },\n       searchField: {\n            alignItems: 'center',\n            display: 'flex',\n            marginLeft: 32\n        }\n    }),\n);\n\nconst CloseableDrawer = (props) => {\n    const classes = useStyles();\n    const {container} = props;\n    const [searchKeyword, setKeyword] = useState(\"\")\n    const dispatch = useDispatch()\n\n    // テキスト入力のonchangeメソット\n    const inputSearchKeyword = useCallback((e)=>{\n        setKeyword(e.target.value);\n    }, [setKeyword])\n\n\n    // 配列に格納するメソットを作成する\n    const selectMenu = (event, path) => {\n         dispatch(push(path));\n         props.onClose(event)\n    }\n\n    // ここにカテゴリー分類を作成する\n    const [filters, setFilters] = useState([\n        {func: selectMenu, label: \"すべて\",    id: \"all\",    value: \"/\"              },\n        {func: selectMenu, label: \"メンズ\",    id: \"male\",   value: \"/?gender=male\"  },\n        {func: selectMenu, label: \"レディース\", id: \"female\", value: \"/?gender=female\"},\n    ])\n\n    const menus = [\n    {func: selectMenu, label: \"商品登録\",    icon: <AddCircleIcon/>, id: \"register\", value: \"/product/edit\"},\n    {func: selectMenu, label: \"注文履歴\",    icon: <HistoryIcon/>,   id: \"history\",  value: \"/order/history\"},\n    {func: selectMenu, label: \"プロフィール\", icon: <PersonIcon/>,    id: \"profile\",  value: \"/user/mypage\"},\n    ];\n\n    // firebaseからカテゴリーを取得する\n    useEffect(()=>{\n            db.collection(\"categories\")\n            .orderBy('order', 'asc')\n            .get()\n            .then((snapshots)=>{\n                const list = [];\n                snapshots.forEach((snapshot)=>{\n                    const data = snapshot.data();\n                    list.push({\n                        func: selectMenu, label: data.name,  id: data.id,  value: `/?category=${data.id}`\n                    })\n                })\n                // 取得したカテゴリーを入れる\n                setFilters(prevState => [...prevState, ...list])\n            })  \n    },[])\n\nreturn(\n<nav className=\"classes drawer\">\n    <Drawer\n        container={container}\n        variant=\"temporary\"\n        anchor={\"right\"}\n        open={props.open}\n        onClose={(e) => props.onClose(e, false)}\n        classes={{\n            paper: classes.drawerPaper,\n        }}\n        ModalProps={{\n            keepMounted: true, // Better open performance on mobile.\n        }}\n    >\n<div>\n    <div className={classes.searchField}>\n        <TextInput\n            fullWidth={false} label={\"キーワードを入力\"} multiline={false}\n            onChange={inputSearchKeyword} required={false} rows={1} value={searchKeyword} type={\"text\"}\n        />\n        <IconButton>\n            <SearchIcon />\n        </IconButton>\n    </div>\n        <Divider />\n        <List>\n        {menus.map(menu=>(\n            <ListItem button key={menu.id} onClick={(e)=>{menu.func(e, menu.value)}}\n            >\n                <ListItemIcon>\n                    {menu.icon}\n                </ListItemIcon>\n                    <ListItemText primary={menu.label}/>\n            </ListItem>\n        ))}\n        <ListItem button key=\"logout\" onClick={()=>dispatch(signOut())}>\n            <ListItemIcon>\n            <ExitToAppIcon />\n            </ListItemIcon>\n            <ListItemText primary={\"ログアウト\"}/>\n        </ListItem>\n        </List>\n        <Divider />\n        <List>\n            {filters.map(filter => (\n                <ListItem button key={filter.id} onClick={(e)=>{filter.func(e, filter.value)}}>\n                  <ListItemText primary={filter.label}/>\n                </ListItem>\n            ))}\n        </List>\n    \n</div>\n</Drawer>\n</nav>\n)\n}\n\nexport default CloseableDrawer","import React from 'react'\nimport Router from './Router'\nimport \"./assets/reset.css\"\nimport \"./assets/style.css\"\nimport {Header} from './componets/header'\n\nconst App = ()=>{\n    return(\n      <>\n       <Header />\n       <main className=\"c-main\">\n        <Router />\n       </main>\n      </>\n    )\n}\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createMuiTheme } from '@material-ui/core/styles';\n\n// Pick colors on https://material.io/resources/color/#!/\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: '#88ffff',\n      main: '#4dd0e1',\n      dark: '#009faf',\n      contrastText: '#000',\n    },\n    secondary: {\n      light: '#ffff81',\n      main: '#ffd54f',\n      dark: '#c8a415',\n      contrastText: '#000',\n    },\n    grey: {\n      50: \"#fafafa\",\n      100: \"#f5f5f5\",\n      200: \"#eeeeee\",\n      300: \"#e0e0e0\",\n      400: \"#bdbdbd\",\n      500: \"#9e9e9e\",\n      600: \"#757575\",\n      700: \"#616161\",\n      800: \"#424242\",\n      900: \"#212121\",\n      A100: \"#d5d5d5\",\n      A200: \"#aaaaaa\",\n      A400: \"#303030\",\n      A700: \"#616161\"\n    }\n  },\n});","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport createStore from './reducks/store/store'\nimport { ConnectedRouter } from \"connected-react-router\";\nimport * as History from \"history\";\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {MuiThemeProvider} from '@material-ui/core/styles';\nimport {theme} from './assets/theme'\n\n// ヒスロリーを取得して変数へ格納\nconst history = History.createBrowserHistory();\nexport const store = createStore(history);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <MuiThemeProvider theme={theme}>\n        <App />\n        </MuiThemeProvider>\n      </ConnectedRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}